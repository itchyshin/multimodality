<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.306">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>test</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="test_files/libs/clipboard/clipboard.min.js"></script>
<script src="test_files/libs/quarto-html/quarto.js"></script>
<script src="test_files/libs/quarto-html/popper.min.js"></script>
<script src="test_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="test_files/libs/quarto-html/anchor.min.js"></script>
<link href="test_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="test_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="test_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="test_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="test_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<hr>
<p>title: “<strong>Integration of multimodal cues does not alter mean but reduces variance in avian responses to predators: a systematic review and meta-analysis</strong>” author: “<strong>Kim + Shinichi et al.</strong>” date: “2023-07-28” format: html: toc: true toc-location: left toc-depth: 3 toc-title: “<strong>Table of Contents</strong>” output-file: “index.html” theme: simplex embed-resources: true code-fold: true code-tools: true number-sections: true #bibliography: ./bib/ref.bib fontsize: “12” max-width: “10” code-overflow: wrap crossref: fig-title: Figure # (default is “Figure”) tbl-title: Table # (default is “Table”) title-delim: — # (default is “:”) fig-prefix: Fig. # (default is “Figure”) tbl-prefix: Tab. # (default is “Table”) editor_options: chunk_output_type: console execute: warning: false message: false tidy: true cache: true —</p>
<section id="setting-up" class="level2">
<h2 class="anchored" data-anchor-id="setting-up">Setting up</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages("pacman")</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">#pacman::p_load(devtools, tidyverse, metafor, patchwork, R.rsp, emmeans)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("daniel1noble/orchaRd", force = TRUE)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.2     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.1     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>here() starts at /Users/z3437171/Dropbox/Github Local/multimodality</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lme4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: Matrix

Attaching package: 'Matrix'

The following objects are masked from 'package:tidyr':

    expand, pack, unpack</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(orchaRd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Loading the 'orchaRd' package (version 2.0). For an
introduction and vignette to the package please see: https://daniel1noble.github.io/orchaRd/</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(gptstudio)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(metafor)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: metadat
Loading required package: numDeriv

Loading the 'metafor' package (version 4.2-0). For an
introduction to the package please type: help(metafor)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(alluvial)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggalluvial)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(easyalluvial)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'ape'

The following object is masked from 'package:dplyr':

    where</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(clubSandwich)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'clubSandwich':
  method    from    
  bread.mlm sandwich</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(emmeans)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MuMIn)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co"># making metafor talk to MuMIn</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">eval</span>(metafor<span class="sc">:::</span>.MuMIn)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("pak")</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">#pak::pak("MichelNivard/gptstudio")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="getting-data-loaded" class="level2">
<h2 class="anchored" data-anchor-id="getting-data-loaded">Getting data loaded</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">#dat_full &lt;- read.csv(here("data/dat_04_04_2023.csv"))</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">#dat_full &lt;- read.csv(here("data/dat_28_06_2023.csv"))</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>dat_full <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"data/dat_19_07_2023.csv"</span>))</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># add phylogenetic tree - only topologies</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co">? - we could get better tree from birdtree.org</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># we can do 50 different trees as in </span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># https://academic.oup.com/sysbio/article/68/4/632/5267840</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>tree_top <span class="ot">&lt;-</span> <span class="fu">read.tree</span>(<span class="fu">here</span>(<span class="st">"R/birds_MA.tre"</span>))</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co"># tree with branch lengths</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>tree <span class="ot">&lt;-</span> <span class="fu">compute.brlen</span>(tree_top)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="co">#plot(tree)</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co"># turning it into a correlation matrix</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>cor_tree <span class="ot">&lt;-</span> <span class="fu">vcv</span>(tree,<span class="at">corr=</span>T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="custom-functions" class="level2">
<h2 class="anchored" data-anchor-id="custom-functions">Custom functions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># custom functions</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' Title: Contrast name generator</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param name: a vector of character strings</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>cont_gen <span class="ot">&lt;-</span> <span class="cf">function</span>(name) {</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  combination <span class="ot">&lt;-</span> <span class="fu">combn</span>(name, <span class="dv">2</span>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  name_dat <span class="ot">&lt;-</span> <span class="fu">t</span>(combination)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  names <span class="ot">&lt;-</span> <span class="fu">paste</span>(name_dat[, <span class="dv">1</span>], name_dat[, <span class="dv">2</span>], <span class="at">sep =</span> <span class="st">"-"</span>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(names)</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co">#' @title get_pred2: normal model</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co">#' @description Function to get CIs (confidence intervals) and PIs (prediction intervals) from rma objects (metafor)</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param model: rma.mv object </span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param mod: the name of a moderator </span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>get_pred <span class="ot">&lt;-</span> <span class="cf">function</span> (model, <span class="at">mod =</span> <span class="st">" "</span>) {</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(<span class="fu">str_replace</span>(<span class="fu">row.names</span>(model<span class="sc">$</span>beta), </span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">paste0</span>(<span class="st">"relevel"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">("</span>, mod,<span class="st">", ref = name"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">)"</span>),</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>                                <span class="st">""</span>))</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  len <span class="ot">&lt;-</span> <span class="fu">length</span>(name)</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(len <span class="sc">!=</span> <span class="dv">1</span>){</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  newdata <span class="ot">&lt;-</span> <span class="fu">diag</span>(len)</span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  pred <span class="ot">&lt;-</span> <span class="fu">predict.rma</span>(model, <span class="at">intercept =</span> <span class="cn">FALSE</span>, <span class="at">newmods =</span> newdata[,<span class="sc">-</span><span class="dv">1</span>])</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> {</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>    pred <span class="ot">&lt;-</span> <span class="fu">predict.rma</span>(model)</span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  estimate <span class="ot">&lt;-</span> pred<span class="sc">$</span>pred</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>  lowerCL <span class="ot">&lt;-</span> pred<span class="sc">$</span>ci.lb</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>  upperCL <span class="ot">&lt;-</span> pred<span class="sc">$</span>ci.ub </span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>  lowerPR <span class="ot">&lt;-</span> pred<span class="sc">$</span>cr.lb</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>  upperPR <span class="ot">&lt;-</span> pred<span class="sc">$</span>cr.ub </span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>  table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">factor</span>(name, <span class="at">levels =</span> name, <span class="at">labels =</span> name), <span class="at">estimate =</span> estimate,</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lowerCL =</span> lowerCL, <span class="at">upperCL =</span> upperCL,</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>                  <span class="at">pval =</span> model<span class="sc">$</span>pval,</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lowerPR =</span> lowerPR, <span class="at">upperPR =</span> upperPR)</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="preparing-data-set" class="level2">
<h2 class="anchored" data-anchor-id="preparing-data-set">Preparing data set</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># function for calculating variance</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>Vd_func <span class="ot">&lt;-</span> <span class="cf">function</span>(d, n1, n2, design, <span class="at">r =</span> <span class="fl">0.5</span>){</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># independent design</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(design <span class="sc">==</span> <span class="st">"among"</span>){</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    var <span class="ot">&lt;-</span> (n1 <span class="sc">+</span> n2) <span class="sc">/</span> (n1<span class="sc">*</span>n2) <span class="sc">+</span> d<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (<span class="dv">2</span> <span class="sc">*</span> (n1 <span class="sc">+</span> n2 <span class="sc">-</span> <span class="dv">2</span>)) <span class="co"># variance</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> { <span class="co"># dependent design</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    var <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span>(<span class="dv">1</span><span class="sc">-</span>r) <span class="sc">/</span> n1 <span class="sc">+</span> d<span class="sc">^</span><span class="dv">2</span> <span class="sc">/</span> (<span class="dv">2</span><span class="sc">*</span>(n1 <span class="sc">-</span> <span class="dv">1</span>)) <span class="co"># variance</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  var <span class="co"># return variance</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co"># getting Hedges' g - get small size bias corrected effect size</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>dat_full<span class="sc">$</span>SMD <span class="ot">&lt;-</span> dat_full<span class="sc">$</span>d <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="dv">3</span><span class="sc">/</span>(<span class="dv">4</span> <span class="sc">*</span> (dat_full<span class="sc">$</span>NTreat <span class="sc">+</span> dat_full<span class="sc">$</span>Ncontrol) <span class="sc">-</span> <span class="dv">9</span>))</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co"># flipping d </span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>dat_full<span class="sc">$</span>SMD <span class="ot">&lt;-</span> dat_full<span class="sc">$</span>d<span class="sc">*</span>dat_full<span class="sc">$</span>Direction<span class="sc">*</span>dat_full<span class="sc">$</span>PredictedDirection</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co"># calucating Vd</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>dat_full<span class="sc">$</span>Vd <span class="ot">&lt;-</span> <span class="fu">with</span>(dat_full, <span class="fu">pmap_dbl</span>(<span class="fu">list</span>(SMD, NTreat, Ncontrol, Design), Vd_func))</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="co"># extra useful function</span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="co"># function for getting mean and sd from median, quartiles and sample size</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="co"># get_mean_sd &lt;- function(median, q1, q3, n){</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="co">#   sd &lt;- (q3 - q1) / (2 * (qnorm((0.75 * n - 0.125) / (n + 0.25)))) # sd</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a><span class="co">#   mean &lt;- (median + q1 + q3)/3 # mean</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a><span class="co">#   c(mean, sd)</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="co"># }</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a><span class="co"># observation id</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>dat_full<span class="sc">$</span>Obs_ID <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(dat_full)</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>dat_full<span class="sc">$</span>Phylo <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">"_"</span>, dat_full<span class="sc">$</span>FocalSpL)</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a><span class="co"># filtering very large variance and also very small sample size</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>dat_int <span class="ot">&lt;-</span> dat_full <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Vd <span class="sc">&lt;</span> <span class="dv">10</span> <span class="sc">&amp;</span> Ncontrol <span class="sc">&gt;</span> <span class="dv">2</span> <span class="sc">&amp;</span> NTreat <span class="sc">&gt;</span> <span class="dv">2</span>)</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a><span class="co">#dim(dat_full)</span></span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a><span class="co">#dim(dat_int)</span></span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a><span class="co"># sorting out modality stuff</span></span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a><span class="co"># creat - 1,2,3 modality - also easier classification A, O, V (AOV = L) </span></span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>dat_int <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">Treat_mod =</span> <span class="fu">case_when</span>(Treatment <span class="sc">==</span> <span class="st">"A"</span> <span class="sc">~</span> <span class="st">"A"</span>,</span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>                                          Treatment <span class="sc">==</span> <span class="st">"AV"</span> <span class="sc">~</span> <span class="st">"AV"</span>,</span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>                                          Treatment <span class="sc">==</span> <span class="st">"AVG"</span> <span class="sc">~</span> <span class="st">"AV"</span>,</span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>                                          Treatment <span class="sc">==</span> <span class="st">"AVM"</span> <span class="sc">~</span> <span class="st">"AV"</span>,</span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>                                          Treatment <span class="sc">==</span> <span class="st">"L"</span> <span class="sc">~</span> <span class="st">"AVO"</span>,</span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>                                          Treatment <span class="sc">==</span> <span class="st">"O"</span> <span class="sc">~</span> <span class="st">"O"</span>,</span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>                                          Treatment <span class="sc">==</span> <span class="st">"OV"</span> <span class="sc">~</span> <span class="st">"OV"</span>,</span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>                                          Treatment <span class="sc">==</span> <span class="st">"V"</span> <span class="sc">~</span> <span class="st">"V"</span>,</span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>                                          Treatment <span class="sc">==</span> <span class="st">"VG"</span> <span class="sc">~</span> <span class="st">"V"</span>,</span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a>                                          Treatment <span class="sc">==</span> <span class="st">"VM"</span> <span class="sc">~</span> <span class="st">"V"</span>,</span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>                                          Treatment <span class="sc">==</span> <span class="st">"VP"</span> <span class="sc">~</span> <span class="st">"V"</span>),</span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>                    <span class="co"># into how many</span></span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Treat_No =</span> <span class="fu">case_when</span>(Treatment <span class="sc">==</span> <span class="st">"A"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"AV"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"AVG"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"AVM"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"L"</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"O"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"OV"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"V"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"VG"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"VM"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"VP"</span> <span class="sc">~</span> <span class="dv">1</span>),</span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>                    <span class="co"># des it have some add-ons</span></span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>                    <span class="at">Add_on =</span> <span class="fu">case_when</span>(Treatment <span class="sc">==</span> <span class="st">"A"</span> <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"AV"</span> <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"AVG"</span> <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"AVM"</span> <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb18-74"><a href="#cb18-74" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"L"</span> <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb18-75"><a href="#cb18-75" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"O"</span> <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"OV"</span> <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"V"</span> <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"VG"</span> <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"VM"</span> <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a>                                         Treatment <span class="sc">==</span> <span class="st">"VP"</span> <span class="sc">~</span> <span class="st">"Yes"</span>),</span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-82"><a href="#cb18-82" aria-hidden="true" tabindex="-1"></a>                      ) <span class="ot">-&gt;</span> dat</span>
<span id="cb18-83"><a href="#cb18-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-84"><a href="#cb18-84" aria-hidden="true" tabindex="-1"></a><span class="co"># creating data just for A, V, and AV </span></span>
<span id="cb18-85"><a href="#cb18-85" aria-hidden="true" tabindex="-1"></a>dat_short <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Treat_mod <span class="sc">==</span> <span class="st">"A"</span> <span class="sc">|</span> Treat_mod <span class="sc">==</span> <span class="st">"V"</span> <span class="sc">|</span> Treat_mod <span class="sc">==</span> <span class="st">"AV"</span>)</span>
<span id="cb18-86"><a href="#cb18-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-87"><a href="#cb18-87" aria-hidden="true" tabindex="-1"></a><span class="co"># for add-on, we only need V and AV</span></span>
<span id="cb18-88"><a href="#cb18-88" aria-hidden="true" tabindex="-1"></a>dat_short_add <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Treat_mod <span class="sc">==</span> <span class="st">"AV"</span> <span class="sc">|</span> Treat_mod <span class="sc">==</span> <span class="st">"V"</span>)</span>
<span id="cb18-89"><a href="#cb18-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-90"><a href="#cb18-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-91"><a href="#cb18-91" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span></span>
<span id="cb18-92"><a href="#cb18-92" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.character, as.factor)</span>
<span id="cb18-93"><a href="#cb18-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-94"><a href="#cb18-94" aria-hidden="true" tabindex="-1"></a><span class="co"># reordering factors for better visualisation</span></span>
<span id="cb18-95"><a href="#cb18-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-96"><a href="#cb18-96" aria-hidden="true" tabindex="-1"></a><span class="co"># dat$Treat_mod &lt;- factor(dat$Treat_mod, levels = c("A", "V", "AV", "O", "OV", "AVO"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="exploratory-visualization" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-visualization">Exploratory visualization</h2>
<!-- we should add N for O, OV and AVO -->
<p>For <code>Treat_mod</code> (Treatment), we will only visualise <code>A</code>, <code>V</code>, and <code>AV</code> as <code>O</code> $r $, <code>OV</code>, and <code>AVO</code> are much rarer. But for <code>Type</code> (Trait type), we will use all data.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Treatment vs.&nbsp;Trait types</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Treatment vs.&nbsp;Treatment duration</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Treatment vs.&nbsp;Sex</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">Treatment vs.&nbsp;Predator type</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false" href="">Treatment vs.&nbsp;Design</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-6" role="tab" aria-controls="tabset-1-6" aria-selected="false" href="">Treatment vs.&nbsp;Season</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-7" role="tab" aria-controls="tabset-1-7" aria-selected="false" href="">Treatment vs.&nbsp;Setting</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-8" role="tab" aria-controls="tabset-1-8" aria-selected="false" href="">Treatment vs Control type</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-9" role="tab" aria-controls="tabset-1-9" aria-selected="false" href="">Trait type vs.&nbsp;Treatment duration</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-10-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-10" role="tab" aria-controls="tabset-1-10" aria-selected="false" href="">Trait type vs.&nbsp;Sex</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reordering dat_shrot$Treat_mod for better visualisation</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>dat_short<span class="sc">$</span>Treat_mod <span class="ot">&lt;-</span> <span class="fu">factor</span>(dat_short<span class="sc">$</span>Treat_mod, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"V"</span>, <span class="st">"AV"</span>))</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Treatment vs Type</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>dat_short <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Treat_mod, Type) <span class="sc">%&gt;%</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="ot">-&gt;</span> tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Treat_mod'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">#alluvial(tab1[,1:2], freq = tab1$n)</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># using ggaruvial</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tab,</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> n,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis1 =</span> Treat_mod,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis2 =</span> Type)) <span class="sc">+</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Treat_mod)) <span class="sc">+</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum))) <span class="sc">+</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co"># remove x-axis labels</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Treatment modality and trait type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tuning Treatment duration into a binary variable</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>dat_short <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">TDration =</span> <span class="fu">case_when</span>(duration_days <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"&lt; 1 day"</span>,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                                          duration_days <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"&gt; 1 day"</span>)) <span class="ot">-&gt;</span> dat_short</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co"># reformatting data</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>dat_short <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Treat_mod, TDration) <span class="sc">%&gt;%</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="ot">-&gt;</span> tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Treat_mod'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using ggaruvial</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tab,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> n,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis1 =</span> Treat_mod,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis2 =</span> TDration)) <span class="sc">+</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Treat_mod)) <span class="sc">+</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum))) <span class="sc">+</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co"># remove x-axis labels</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Treatment modality and duration of treatment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># Treat_mod vs Design</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>dat_short <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Treat_mod, Sex) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="ot">-&gt;</span> tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Treat_mod'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reordering</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>tab<span class="sc">$</span>Sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(tab<span class="sc">$</span>Sex, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"both"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="st">"Male"</span>, <span class="st">"Both"</span>))</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># using ggaruvial</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tab,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> n,</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis1 =</span> Treat_mod,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis2 =</span> Sex)) <span class="sc">+</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Treat_mod)) <span class="sc">+</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum))) <span class="sc">+</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co"># remove x-axis labels</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Treatment modality and sex"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Treat_mod vs Design</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>dat_short <span class="sc">%&gt;%</span> <span class="fu">filter</span>(PredTo <span class="sc">!=</span> <span class="st">""</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Treat_mod, PredTo) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="ot">-&gt;</span> tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Treat_mod'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>tab<span class="sc">$</span>PredTo <span class="ot">&lt;-</span> <span class="fu">factor</span>(tab<span class="sc">$</span>PredTo, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"A"</span>, <span class="st">"N"</span>, <span class="st">"B"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Adult"</span>, <span class="st">"Nestling"</span>, <span class="st">"Both"</span>))</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co">#alluvial(tab1[,1:2], freq = tab1$n)</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># using ggaruvial</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tab,</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> n,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis1 =</span> Treat_mod,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis2 =</span> PredTo)) <span class="sc">+</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Treat_mod)) <span class="sc">+</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum))) <span class="sc">+</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co"># remove x-axis labels</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Treatment modality and predator type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># Treat_mod vs Design</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>dat_short <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Treat_mod, Design) <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="ot">-&gt;</span> tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Treat_mod'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">#alluvial(tab1[,1:2], freq = tab1$n)</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="co"># using ggaruvial</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tab,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> n,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis1 =</span> Treat_mod,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis2 =</span> Design)) <span class="sc">+</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Treat_mod)) <span class="sc">+</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum))) <span class="sc">+</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co"># remove x-axis labels</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Treatment modality and study design"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-6-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># Treat_mod vs Design</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>dat_short <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Treat_mod, Season) <span class="sc">%&gt;%</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="ot">-&gt;</span> tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Treat_mod'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#alluvial(tab1[,1:2], freq = tab1$n)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co"># using ggaruvial</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tab,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> n,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis1 =</span> Treat_mod,</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis2 =</span> Season)) <span class="sc">+</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Treat_mod)) <span class="sc">+</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum))) <span class="sc">+</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co"># remove x-axis labels</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Treatment modality and season"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-7-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a> <span class="co"># Treat_mod vs Design</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>dat_short <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Treat_mod, Setting) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="ot">-&gt;</span> tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Treat_mod'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#alluvial(tab1[,1:2], freq = tab1$n)</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># using ggaruvial</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tab,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> n,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis1 =</span> Treat_mod,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis2 =</span> Setting)) <span class="sc">+</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Treat_mod)) <span class="sc">+</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum))) <span class="sc">+</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co"># remove x-axis labels</span></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Treatment modality and study setting"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-8-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Treat_mod vs ControlType</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>dat_short <span class="sc">%&gt;%</span> <span class="fu">filter</span>(ControlType <span class="sc">!=</span> <span class="st">"mix"</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Treat_mod, ControlType) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="ot">-&gt;</span> tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Treat_mod'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#alluvial(tab1[,1:2], freq = tab1$n)</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="co"># using ggaruvial</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tab,</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> n,</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis1 =</span> Treat_mod,</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis2 =</span> ControlType)) <span class="sc">+</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Treat_mod)) <span class="sc">+</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum))) <span class="sc">+</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co"># remove x-axis labels</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Treatment modality and control type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-9-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Type vs duration_days</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># turn duration_days into a binary factor: less than 1 and more than 1</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">TDration =</span> <span class="fu">case_when</span>(duration_days <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"&lt; 1 day"</span>,</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>                                          duration_days <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"&gt; 1 day"</span>)) <span class="ot">-&gt;</span> dat</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Type, TDration) <span class="sc">%&gt;%</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="ot">-&gt;</span> tab2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Type'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># using ggaruvial</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tab2,</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> n,</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis1 =</span> Type,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis2 =</span> TDration)) <span class="sc">+</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Type)) <span class="sc">+</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum))) <span class="sc">+</span></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co"># remove x-axis labels</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Trait type and duration of treatment"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-10" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-10-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Type vs duration_days</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># turn duration_days into a binary factor: less than 1 and more than 1</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">TDration =</span> <span class="fu">case_when</span>(duration_days <span class="sc">&lt;</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"&lt; 1 day"</span>,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>                                          duration_days <span class="sc">&gt;=</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"&gt; 1 day"</span>)) <span class="ot">-&gt;</span> dat</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>dat <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Type, Sex) <span class="sc">%&gt;%</span></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="ot">-&gt;</span> tab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Type'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reordering</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>tab<span class="sc">$</span>Sex <span class="ot">&lt;-</span> <span class="fu">factor</span>(tab<span class="sc">$</span>Sex, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"both"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="st">"Male"</span>, <span class="st">"Both"</span>))</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co"># using ggaruvial</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tab,</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> n,</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis1 =</span> Type,</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">axis2 =</span> Sex)) <span class="sc">+</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_alluvium</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Type)) <span class="sc">+</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_stratum</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"stratum"</span>, <span class="at">size =</span> <span class="dv">4</span>, <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">after_stat</span>(stratum))) <span class="sc">+</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co"># remove x-axis labels</span></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Trait type and sex"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="meta-analysis" class="level2">
<h2 class="anchored" data-anchor-id="meta-analysis">Meta-analysis</h2>
<section id="all-random-effects" class="level3">
<h3 class="anchored" data-anchor-id="all-random-effects">All random effects</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="do">##| warning: false</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co"># VCV matrix</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>VCV <span class="ot">&lt;-</span> <span class="fu">vcalc</span>(<span class="at">vi =</span> dat<span class="sc">$</span>Vd,</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">cluster =</span> dat<span class="sc">$</span>SubjectID,</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">rho =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster y.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 29.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 120.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster w.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster x.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 36.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 93.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 48.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 110.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster a.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 107.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 64.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 112.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 3.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 40.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 33.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster d.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 101.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 102.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 109.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 30a.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 30b.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 17.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 103.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 37.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 137.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 111.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 122.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 113.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 117.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 20.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 18.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 63.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 135.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 45.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 24.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 25.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 26.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 27.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 28.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 128.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 129.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 136.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 138.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 139.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 142.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 143.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 144.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 119.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 123.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 130.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 54.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 59.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 115.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 38.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 8.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 9.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster o.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster p.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster q.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 104.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 44.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 124.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 145.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 146.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 7.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 121.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster s.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 57.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 58.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 118.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 105.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 49.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 35.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 60.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 106.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 94.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 87.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 47.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 133.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 134.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 114.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 126.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 31.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 96.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 97.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 78.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 32.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 127.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 91.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 92.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster e.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster g.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster f.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 90.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 147.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 21.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 22.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 125.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 65.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 66.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 10.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 11.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 12.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 13.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 14.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 15.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 16.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 39.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 67.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 68.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 69.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 70.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 71.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 72.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 73.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 74.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 75.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 76.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>mod0 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD,</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">V =</span> VCV, </span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">random =</span> <span class="fu">list</span>(<span class="co">#~1 | Phylo,</span></span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>                     <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> FocalSpL,</span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a>                     <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a>                     <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> SubjectID, <span class="co"># incoprated as VCV</span></span>
<span id="cb169-7"><a href="#cb169-7" aria-hidden="true" tabindex="-1"></a>                     <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb169-8"><a href="#cb169-8" aria-hidden="true" tabindex="-1"></a>      <span class="co"># R = list(Phylo = cor_tree),</span></span>
<span id="cb169-9"><a href="#cb169-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb169-10"><a href="#cb169-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb169-11"><a href="#cb169-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb169-12"><a href="#cb169-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod0)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-894.6453  1789.2906  1799.2906  1821.5901  1799.3853   

Variance Components:

            estim    sqrt  nlvls  fixed     factor 
sigma^2.1  0.0111  0.1053     90     no   FocalSpL 
sigma^2.2  0.1450  0.3808    116     no      RecNo 
sigma^2.3  0.0000  0.0001    153     no  SubjectID 
sigma^2.4  0.6872  0.8290    640     no     Obs_ID 

Model Results:

estimate      se    tval   df    pval   ci.lb   ci.ub      
  0.4139  0.0653  6.3401  639  &lt;.0001  0.2857  0.5421  *** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> - think about whether we add this or not</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">robust</span>(mod0, <span class="at">cluster =</span> dat<span class="sc">$</span>SubjectID)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

Variance Components:

            estim    sqrt  nlvls  fixed     factor 
sigma^2.1  0.0111  0.1053     90     no   FocalSpL 
sigma^2.2  0.1450  0.3808    116     no      RecNo 
sigma^2.3  0.0000  0.0001    153     no  SubjectID 
sigma^2.4  0.6872  0.8290    640     no     Obs_ID 

Number of estimates:   640
Number of clusters:    153
Estimates per cluster: 1-29 (mean: 4.18, median: 2)

Model Results:

estimate      se¹    tval¹   df¹    pval¹   ci.lb¹   ci.ub¹      
  0.4139  0.0540   7.6691   152   &lt;.0001   0.3073   0.5206   *** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

1) results based on cluster-robust inference (var-cov estimator: CR1,
   approx t-test and confidence interval, df: residual method)</code></pre>
</div>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">i2_ml</span>(mod0), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    I2_Total  I2_FocalSpL     I2_RecNo I2_SubjectID    I2_Obs_ID 
       92.81         1.22        15.96         0.00        75.63 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod0,</span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>,</span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">branch.size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="reduced-model" class="level3">
<h3 class="anchored" data-anchor-id="reduced-model">Reduced model</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reduced model</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a>mod0r <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD,</span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">V =</span> VCV, </span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">random =</span> <span class="fu">list</span>(<span class="co">#~1 | Phylo,</span></span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a>                     <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> FocalSpL,</span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a>                     <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a>                     <span class="co">#~1 | SubjectID, # incoprated as VCV</span></span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a>                     <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb178-10"><a href="#cb178-10" aria-hidden="true" tabindex="-1"></a>       <span class="co">#R = list(Phylo = cor_tree),</span></span>
<span id="cb178-11"><a href="#cb178-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb178-12"><a href="#cb178-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb178-13"><a href="#cb178-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb178-14"><a href="#cb178-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod0r)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-894.6453  1789.2906  1797.2906  1815.1302  1797.3537   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0111  0.1052     90     no  FocalSpL 
sigma^2.2  0.1450  0.3808    116     no     RecNo 
sigma^2.3  0.6872  0.8290    640     no    Obs_ID 

Model Results:

estimate      se    tval   df    pval   ci.lb   ci.ub      
  0.4139  0.0653  6.3401  639  &lt;.0001  0.2857  0.5421  *** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">i2_ml</span>(mod0r), <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   I2_Total I2_FocalSpL    I2_RecNo   I2_Obs_ID 
      92.81        1.22       15.96       75.63 </code></pre>
</div>
</div>
</section>
</section>
<section id="meta-regression-uni-moderator-mostly" class="level2">
<h2 class="anchored" data-anchor-id="meta-regression-uni-moderator-mostly">Meta-regression: uni-moderator (mostly)</h2>
<section id="treatmeant-with-all-data" class="level3">
<h3 class="anchored" data-anchor-id="treatmeant-with-all-data">Treatmeant with all data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Treatment - A, V, AV etc </span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="co">#dat$Phylo &lt;- as.character(dat$Phylo)</span></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="co">#match(dat$Phylo, colnames(cor_tree))</span></span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a><span class="co">#match(colnames(cor_tree), dat$Phylo)</span></span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a>mod1 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb184-8"><a href="#cb184-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> FocalSpL,</span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb184-10"><a href="#cb184-10" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb184-11"><a href="#cb184-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">mod =</span> <span class="sc">~</span> Treat_mod <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb184-12"><a href="#cb184-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb184-13"><a href="#cb184-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb184-14"><a href="#cb184-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb184-15"><a href="#cb184-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-887.7086  1775.4172  1793.4172  1833.4856  1793.7056   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0074  0.0862     90     no  FocalSpL 
sigma^2.2  0.1563  0.3954    116     no     RecNo 
sigma^2.3  0.6907  0.8311    640     no    Obs_ID 

Test of Moderators (coefficients 1:6):
F(df1 = 6, df2 = 634) = 6.8763, p-val &lt; .0001

Model Results:

              estimate      se    tval   df    pval    ci.lb   ci.ub      
Treat_modA      0.4019  0.0971  4.1381  634  &lt;.0001   0.2112  0.5926  *** 
Treat_modAV     0.4723  0.1345  3.5128  634  0.0005   0.2083  0.7363  *** 
Treat_modAVO    0.5955  0.4487  1.3270  634  0.1850  -0.2857  1.4767      
Treat_modO      0.2577  0.2930  0.8797  634  0.3793  -0.3176  0.8330      
Treat_modOV     0.0185  0.3829  0.0482  634  0.9615  -0.7334  0.7703      
Treat_modV      0.4324  0.1043  4.1442  634  &lt;.0001   0.2275  0.6373  *** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod1)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          0.64          19.68 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod1, </span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Treat_mod"</span>,</span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>, </span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>,</span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">branch.size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="co"># doing contrasts</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="co"># getting the level names out</span></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>level_names <span class="ot">&lt;-</span> <span class="fu">levels</span>(dat<span class="sc">$</span>Treat_mod)</span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-6"><a href="#cb191-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-7"><a href="#cb191-7" aria-hidden="true" tabindex="-1"></a><span class="co"># meta-regression: contrasts </span></span>
<span id="cb191-8"><a href="#cb191-8" aria-hidden="true" tabindex="-1"></a><span class="co"># helper function to run metafor meta-regression</span></span>
<span id="cb191-9"><a href="#cb191-9" aria-hidden="true" tabindex="-1"></a>run_rma <span class="ot">&lt;-</span> <span class="cf">function</span>(name) {</span>
<span id="cb191-10"><a href="#cb191-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb191-11"><a href="#cb191-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">V =</span> VCV, </span>
<span id="cb191-12"><a href="#cb191-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">mods =</span> <span class="sc">~</span> <span class="fu">relevel</span>(Treat_mod, <span class="at">ref =</span> name), </span>
<span id="cb191-13"><a href="#cb191-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> FocalSpL,</span>
<span id="cb191-14"><a href="#cb191-14" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb191-15"><a href="#cb191-15" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb191-16"><a href="#cb191-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">mod =</span> <span class="sc">~</span> Treat_mod <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb191-17"><a href="#cb191-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb191-18"><a href="#cb191-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb191-19"><a href="#cb191-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb191-20"><a href="#cb191-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span>
<span id="cb191-21"><a href="#cb191-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb191-22"><a href="#cb191-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-23"><a href="#cb191-23" aria-hidden="true" tabindex="-1"></a><span class="co"># results of meta-regression including all contrast results; taking the last level out ([-length(level_names)])</span></span>
<span id="cb191-24"><a href="#cb191-24" aria-hidden="true" tabindex="-1"></a>mr_Treat_mod <span class="ot">&lt;-</span> <span class="fu">map</span>(level_names[<span class="sc">-</span><span class="fu">length</span>(level_names)], run_rma)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Extra argument ('mod') disregarded.

Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Extra argument ('mod') disregarded.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Extra argument ('mod') disregarded.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Extra argument ('mod') disregarded.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Extra argument ('mod') disregarded.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb201"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">map</span>(mr_Treat_mod, <span class="sc">~</span> <span class="fu">get_pred</span>(.x, <span class="at">mod =</span> <span class="st">"Treat_mod"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in min(x$ddf[bn0]): no non-missing arguments to min; returning Inf</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in min(x$ddf[bn0]): no non-missing arguments to min; returning Inf

Warning in min(x$ddf[bn0]): no non-missing arguments to min; returning Inf

Warning in min(x$ddf[bn0]): no non-missing arguments to min; returning Inf

Warning in min(x$ddf[bn0]): no non-missing arguments to min; returning Inf</code></pre>
</div>
</div>
</section>
<section id="treatment-with-relevant-data" class="level3">
<h3 class="anchored" data-anchor-id="treatment-with-relevant-data">Treatment with relevant data</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>VCVs <span class="ot">&lt;-</span> <span class="fu">vcalc</span>(<span class="at">vi =</span> dat_short<span class="sc">$</span>Vd,</span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">cluster =</span> dat_short<span class="sc">$</span>SubjectID,</span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">rho =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster y.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 29.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 120.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster w.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster x.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 36.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 93.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 48.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 110.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster a.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 107.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 64.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 112.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 3.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 40.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 33.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster d.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 101.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 102.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 109.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 30a.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 30b.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 17.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 103.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 137.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 111.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 122.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 113.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 117.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 20.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 63.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 135.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 45.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 24.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 25.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 26.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 27.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 28.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 128.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 129.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 136.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 138.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 139.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 142.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 143.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 144.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 119.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 123.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 130.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 54.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 59.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 115.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 38.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 8.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 9.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster o.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster p.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster q.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 104.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 44.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 124.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 145.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 146.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 7.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 121.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster s.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 57.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 58.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 118.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 49.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 35.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 60.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 94.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 87.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 114.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 126.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 31.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 96.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 97.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 78.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 32.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 127.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 91.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 92.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 105.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 106.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster e.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster g.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster f.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 147.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 21.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 22.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 125.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 66.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 10.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 11.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 12.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 13.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 14.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 15.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 16.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 39.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 67.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 68.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 69.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 70.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 71.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 72.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 73.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 74.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 75.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 76.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb317"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a>mod1a <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD,</span>
<span id="cb317-2"><a href="#cb317-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">V =</span> VCVs,</span>
<span id="cb317-3"><a href="#cb317-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL,</span>
<span id="cb317-4"><a href="#cb317-4" aria-hidden="true" tabindex="-1"></a>                                 <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb317-5"><a href="#cb317-5" aria-hidden="true" tabindex="-1"></a>                                 <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb317-6"><a href="#cb317-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">mod =</span> <span class="sc">~</span> Treat_mod, </span>
<span id="cb317-7"><a href="#cb317-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb317-8"><a href="#cb317-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb317-9"><a href="#cb317-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb317-10"><a href="#cb317-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> dat_short)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb319"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to look at A vs AV and A vs V</span></span>
<span id="cb319-2"><a href="#cb319-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> - make these hetero model too</span></span>
<span id="cb319-3"><a href="#cb319-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod1a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 600; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-847.7054  1695.4108  1707.4108  1733.7623  1707.5532   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0087  0.0932     81     no  FocalSpL 
sigma^2.2  0.1700  0.4123    104     no     RecNo 
sigma^2.3  0.7138  0.8449    600     no    Obs_ID 

Test of Moderators (coefficients 2:3):
F(df1 = 2, df2 = 597) = 0.0958, p-val = 0.9086

Model Results:

             estimate      se    tval   df    pval    ci.lb   ci.ub      
intrcpt        0.4055  0.0996  4.0715  597  &lt;.0001   0.2099  0.6012  *** 
Treat_modV     0.0330  0.1411  0.2342  597  0.8149  -0.2441  0.3101      
Treat_modAV    0.0727  0.1662  0.4373  597  0.6621  -0.2537  0.3990      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb321"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a>mod1b <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">V =</span> VCVs, </span>
<span id="cb321-3"><a href="#cb321-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb321-4"><a href="#cb321-4" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo, </span>
<span id="cb321-5"><a href="#cb321-5" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID), </span>
<span id="cb321-6"><a href="#cb321-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">mod =</span> <span class="sc">~</span> <span class="fu">relevel</span>(<span class="fu">factor</span>(Treat_mod), <span class="at">ref =</span> <span class="st">"AV"</span>), </span>
<span id="cb321-7"><a href="#cb321-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb321-8"><a href="#cb321-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb321-9"><a href="#cb321-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb321-10"><a href="#cb321-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> dat_short)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb323"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to look at AV vs V and AV vs A (already done)</span></span>
<span id="cb323-2"><a href="#cb323-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod1b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 600; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-847.7054  1695.4108  1707.4108  1733.7623  1707.5532   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0087  0.0932     81     no  FocalSpL 
sigma^2.2  0.1700  0.4123    104     no     RecNo 
sigma^2.3  0.7138  0.8449    600     no    Obs_ID 

Test of Moderators (coefficients 2:3):
F(df1 = 2, df2 = 597) = 0.0958, p-val = 0.9086

Model Results:

                                         estimate      se     tval   df    pval 
intrcpt                                    0.4782  0.1379   3.4687  597  0.0006 
relevel(factor(Treat_mod), ref = "AV")A   -0.0727  0.1662  -0.4373  597  0.6621 
relevel(factor(Treat_mod), ref = "AV")V   -0.0396  0.1560  -0.2540  597  0.7996 
                                           ci.lb   ci.ub      
intrcpt                                   0.2074  0.7490  *** 
relevel(factor(Treat_mod), ref = "AV")A  -0.3990  0.2537      
relevel(factor(Treat_mod), ref = "AV")V  -0.3460  0.2668      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb325"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod1a, </span>
<span id="cb325-2"><a href="#cb325-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Treat_mod"</span>,</span>
<span id="cb325-3"><a href="#cb325-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>, </span>
<span id="cb325-4"><a href="#cb325-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>,</span>
<span id="cb325-5"><a href="#cb325-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">branch.size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="co"># modeling heteroscedasticity</span></span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true" tabindex="-1"></a>mod1c <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb326-3"><a href="#cb326-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">V =</span> VCVs, </span>
<span id="cb326-4"><a href="#cb326-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb326-5"><a href="#cb326-5" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo, </span>
<span id="cb326-6"><a href="#cb326-6" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">~</span> Treat_mod <span class="sc">|</span> Obs_ID), </span>
<span id="cb326-7"><a href="#cb326-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">mod =</span> <span class="sc">~</span> Treat_mod, </span>
<span id="cb326-8"><a href="#cb326-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb326-9"><a href="#cb326-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">struct =</span> <span class="st">"DIAG"</span>,</span>
<span id="cb326-10"><a href="#cb326-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb326-11"><a href="#cb326-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb326-12"><a href="#cb326-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> dat_short)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod1c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 600; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-838.2594  1676.5188  1692.5188  1727.6541  1692.7637   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0086  0.0927     81     no  FocalSpL 
sigma^2.2  0.1764  0.4200    104     no     RecNo 

outer factor: Obs_ID    (nlvls = 600)
inner factor: Treat_mod (nlvls = 3)

            estim    sqrt  k.lvl  fixed  level 
tau^2.1    0.7479  0.8648    302     no      A 
tau^2.2    0.8583  0.9264    190     no      V 
tau^2.3    0.3460  0.5882    108     no     AV 

Test of Moderators (coefficients 2:3):
F(df1 = 2, df2 = 597) = 0.0343, p-val = 0.9662

Model Results:

             estimate      se    tval   df    pval    ci.lb   ci.ub      
intrcpt        0.4100  0.1013  4.0495  597  &lt;.0001   0.2112  0.6089  *** 
Treat_modV     0.0300  0.1452  0.2068  597  0.8363  -0.2552  0.3152      
Treat_modAV    0.0382  0.1550  0.2466  597  0.8053  -0.2662  0.3426      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb330"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="co"># comparision models</span></span>
<span id="cb330-2"><a href="#cb330-2" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(mod1a, mod1c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
        df       AIC       BIC      AICc    logLik     LRT   pval QE 
Full     8 1692.5188 1727.6541 1692.7637 -838.2594                NA 
Reduced  6 1707.4108 1733.7623 1707.5532 -847.7054 18.8921 &lt;.0001 NA </code></pre>
</div>
<div class="sourceCode cell-code" id="cb332"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod1c, </span>
<span id="cb332-2"><a href="#cb332-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Treat_mod"</span>,</span>
<span id="cb332-3"><a href="#cb332-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>, </span>
<span id="cb332-4"><a href="#cb332-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>,</span>
<span id="cb332-5"><a href="#cb332-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">branch.size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-18-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="treatment-with-some-additions" class="level3">
<h3 class="anchored" data-anchor-id="treatment-with-some-additions">Treatment with some additions</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the effect of additions</span></span>
<span id="cb333-2"><a href="#cb333-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this is a part of sensitivity analysis</span></span>
<span id="cb333-3"><a href="#cb333-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb333-4"><a href="#cb333-4" aria-hidden="true" tabindex="-1"></a>VCVs2 <span class="ot">&lt;-</span> <span class="fu">vcalc</span>(<span class="at">vi =</span> dat_short_add<span class="sc">$</span>Vd,</span>
<span id="cb333-5"><a href="#cb333-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">cluster =</span> dat_short_add<span class="sc">$</span>SubjectID,</span>
<span id="cb333-6"><a href="#cb333-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">rho =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 120.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 36.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 93.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 48.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 110.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 107.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 112.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 3.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 40.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster d.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 101.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 102.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 30a.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 30b.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 17.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 103.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 137.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 111.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 122.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 117.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 20.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 135.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 24.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 25.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 26.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 27.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 28.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 128.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 136.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 138.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 139.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 142.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 143.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 144.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 119.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 130.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 54.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 59.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 38.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 8.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 9.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 104.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 7.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 57.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 58.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 118.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 35.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 126.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 31.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 78.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 32.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 127.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 91.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 147.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 21.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 125.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb390"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb390-1"><a href="#cb390-1" aria-hidden="true" tabindex="-1"></a>mod5 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb390-2"><a href="#cb390-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">V =</span> VCVs2, </span>
<span id="cb390-3"><a href="#cb390-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb390-4"><a href="#cb390-4" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo, </span>
<span id="cb390-5"><a href="#cb390-5" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">~</span> Treat_mod <span class="sc">|</span> Obs_ID), </span>
<span id="cb390-6"><a href="#cb390-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">mod =</span> <span class="sc">~</span> Treat_mod<span class="sc">*</span>Add_on <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb390-7"><a href="#cb390-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb390-8"><a href="#cb390-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">struct =</span> <span class="st">"DIAG"</span>,</span>
<span id="cb390-9"><a href="#cb390-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb390-10"><a href="#cb390-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb390-11"><a href="#cb390-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> dat_short_add)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb392"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod5)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 298; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-414.2668   828.5336   844.5336   874.0022   845.0388   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0000  0.0001     39     no  FocalSpL 
sigma^2.2  0.1561  0.3950     58     no     RecNo 

outer factor: Obs_ID    (nlvls = 298)
inner factor: Treat_mod (nlvls = 2)

            estim    sqrt  k.lvl  fixed  level 
tau^2.1    0.3485  0.5904    108     no     AV 
tau^2.2    0.8462  0.9199    190     no      V 

Test of Moderators (coefficients 1:4):
F(df1 = 4, df2 = 294) = 6.0475, p-val = 0.0001

Model Results:

                      estimate      se     tval   df    pval    ci.lb   ci.ub 
Treat_modAV             0.4064  0.1261   3.2223  294  0.0014   0.1582  0.6546 
Treat_modV              0.4344  0.1166   3.7269  294  0.0002   0.2050  0.6639 
Add_onYes               0.1193  0.2685   0.4442  294  0.6573  -0.4092  0.6477 
Treat_modV:Add_onYes   -0.2433  0.3460  -0.7033  294  0.4824  -0.9242  0.4376 
                          
Treat_modAV            ** 
Treat_modV            *** 
Add_onYes                 
Treat_modV:Add_onYes      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="treatment-as-an-ordinal-variable" class="level3">
<h3 class="anchored" data-anchor-id="treatment-as-an-ordinal-variable">Treatment as an ordinal variable</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb394"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="co"># testing the number of stimuli</span></span>
<span id="cb394-2"><a href="#cb394-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb394-3"><a href="#cb394-3" aria-hidden="true" tabindex="-1"></a>mod4 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb394-4"><a href="#cb394-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb394-5"><a href="#cb394-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb394-6"><a href="#cb394-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo, </span>
<span id="cb394-7"><a href="#cb394-7" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID), </span>
<span id="cb394-8"><a href="#cb394-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">mod =</span> <span class="sc">~</span> Treat_No, </span>
<span id="cb394-9"><a href="#cb394-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb394-10"><a href="#cb394-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb394-11"><a href="#cb394-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb394-12"><a href="#cb394-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb396"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-893.4118  1786.8236  1796.8236  1819.1153  1796.9185   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0117  0.1081     90     no  FocalSpL 
sigma^2.2  0.1469  0.3833    116     no     RecNo 
sigma^2.3  0.6875  0.8292    640     no    Obs_ID 

Test of Moderators (coefficient 2):
F(df1 = 1, df2 = 638) = 0.0952, p-val = 0.7577

Model Results:

          estimate      se    tval   df    pval    ci.lb   ci.ub    
intrcpt     0.3696  0.1603  2.3057  638  0.0214   0.0548  0.6843  * 
Treat_No    0.0366  0.1185  0.3086  638  0.7577  -0.1962  0.2694    

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb398"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bubble_plot</span>(mod4,</span>
<span id="cb398-2"><a href="#cb398-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Treat_No"</span>,</span>
<span id="cb398-3"><a href="#cb398-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb398-4"><a href="#cb398-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"The number of simuli"</span>,</span>
<span id="cb398-5"><a href="#cb398-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">g =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="trait-type" class="level3">
<h3 class="anchored" data-anchor-id="trait-type">Trait type</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb399"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Type of responses</span></span>
<span id="cb399-2"><a href="#cb399-2" aria-hidden="true" tabindex="-1"></a>mod2 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb399-3"><a href="#cb399-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb399-4"><a href="#cb399-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> FocalSpL,</span>
<span id="cb399-5"><a href="#cb399-5" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb399-6"><a href="#cb399-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb399-7"><a href="#cb399-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">mod =</span> <span class="sc">~</span> Type <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb399-8"><a href="#cb399-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb399-9"><a href="#cb399-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb399-10"><a href="#cb399-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb399-11"><a href="#cb399-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb401"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb401-1"><a href="#cb401-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-886.7295  1773.4590  1785.4590  1812.1996  1785.5923   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0000  0.0002     90     no  FocalSpL 
sigma^2.2  0.1322  0.3635    116     no     RecNo 
sigma^2.3  0.6902  0.8308    640     no    Obs_ID 

Test of Moderators (coefficients 1:3):
F(df1 = 3, df2 = 637) = 18.0966, p-val &lt; .0001

Model Results:

                 estimate      se    tval   df    pval    ci.lb   ci.ub      
TypeBehaviour      0.4866  0.0677  7.1917  637  &lt;.0001   0.3537  0.6194  *** 
TypeLifeHistory    0.3089  0.1176  2.6263  637  0.0088   0.0779  0.5398   ** 
TypePhysiology     0.0284  0.1285  0.2207  637  0.8254  -0.2240  0.2807      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb403"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb403-1"><a href="#cb403-1" aria-hidden="true" tabindex="-1"></a>mod2c <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb403-2"><a href="#cb403-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb403-3"><a href="#cb403-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL,</span>
<span id="cb403-4"><a href="#cb403-4" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb403-5"><a href="#cb403-5" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb403-6"><a href="#cb403-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">mod =</span> <span class="sc">~</span> Type,</span>
<span id="cb403-7"><a href="#cb403-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb403-8"><a href="#cb403-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb403-9"><a href="#cb403-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb403-10"><a href="#cb403-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb405"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb405-1"><a href="#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod2c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-886.7295  1773.4590  1785.4590  1812.1996  1785.5923   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0000  0.0002     90     no  FocalSpL 
sigma^2.2  0.1322  0.3635    116     no     RecNo 
sigma^2.3  0.6902  0.8308    640     no    Obs_ID 

Test of Moderators (coefficients 2:3):
F(df1 = 2, df2 = 637) = 5.9194, p-val = 0.0028

Model Results:

                 estimate      se     tval   df    pval    ci.lb    ci.ub      
intrcpt            0.4866  0.0677   7.1917  637  &lt;.0001   0.3537   0.6194  *** 
TypeLifeHistory   -0.1777  0.1222  -1.4549  637  0.1462  -0.4176   0.0622      
TypePhysiology    -0.4582  0.1350  -3.3950  637  0.0007  -0.7232  -0.1932  *** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb407"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb407-1"><a href="#cb407-1" aria-hidden="true" tabindex="-1"></a>mod2d <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD,</span>
<span id="cb407-2"><a href="#cb407-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV,</span>
<span id="cb407-3"><a href="#cb407-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL,</span>
<span id="cb407-4"><a href="#cb407-4" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb407-5"><a href="#cb407-5" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb407-6"><a href="#cb407-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">mod =</span> <span class="sc">~</span> <span class="fu">relevel</span>(Type, <span class="at">ref =</span> <span class="st">"LifeHistory"</span>),</span>
<span id="cb407-7"><a href="#cb407-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb407-8"><a href="#cb407-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb407-9"><a href="#cb407-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb407-10"><a href="#cb407-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb409"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb409-1"><a href="#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod2d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-886.7295  1773.4590  1785.4590  1812.1996  1785.5923   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0000  0.0002     90     no  FocalSpL 
sigma^2.2  0.1322  0.3635    116     no     RecNo 
sigma^2.3  0.6902  0.8308    640     no    Obs_ID 

Test of Moderators (coefficients 2:3):
F(df1 = 2, df2 = 637) = 5.9194, p-val = 0.0028

Model Results:

                                              estimate      se     tval   df 
intrcpt                                         0.3089  0.1176   2.6263  637 
relevel(Type, ref = "LifeHistory")Behaviour     0.1777  0.1222   1.4549  637 
relevel(Type, ref = "LifeHistory")Physiology   -0.2805  0.1557  -1.8017  637 
                                                pval    ci.lb   ci.ub     
intrcpt                                       0.0088   0.0779  0.5398  ** 
relevel(Type, ref = "LifeHistory")Behaviour   0.1462  -0.0622  0.4176     
relevel(Type, ref = "LifeHistory")Physiology  0.0721  -0.5862  0.0252   . 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb411"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb411-1"><a href="#cb411-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod2,</span>
<span id="cb411-2"><a href="#cb411-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Type"</span>,</span>
<span id="cb411-3"><a href="#cb411-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>, </span>
<span id="cb411-4"><a href="#cb411-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>,</span>
<span id="cb411-5"><a href="#cb411-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">branch.size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb412"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod2)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          3.15          18.71 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb414"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="co"># heteroscadasticity model</span></span>
<span id="cb414-2"><a href="#cb414-2" aria-hidden="true" tabindex="-1"></a>mod2b <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb414-3"><a href="#cb414-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb414-4"><a href="#cb414-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">mod =</span> <span class="sc">~</span> Type <span class="sc">-</span> <span class="dv">1</span>, </span>
<span id="cb414-5"><a href="#cb414-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb414-6"><a href="#cb414-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo, </span>
<span id="cb414-7"><a href="#cb414-7" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span>Type <span class="sc">|</span> Obs_ID), </span>
<span id="cb414-8"><a href="#cb414-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">struct =</span> <span class="st">"DIAG"</span>,</span>
<span id="cb414-9"><a href="#cb414-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb414-10"><a href="#cb414-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb414-11"><a href="#cb414-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb414-12"><a href="#cb414-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb416"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod2b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-870.7865  1741.5731  1757.5731  1793.2272  1757.8024   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0274  0.1656     90     no  FocalSpL 
sigma^2.2  0.1296  0.3600    116     no     RecNo 

outer factor: Obs_ID (nlvls = 640)
inner factor: Type   (nlvls = 3)

            estim    sqrt  k.lvl  fixed        level 
tau^2.1    0.6577  0.8110    434     no    Behaviour 
tau^2.2    0.3176  0.5636    112     no  LifeHistory 
tau^2.3    1.2391  1.1131     94     no   Physiology 

Test of Moderators (coefficients 1:3):
F(df1 = 3, df2 = 637) = 17.4552, p-val &lt; .0001

Model Results:

                 estimate      se    tval   df    pval    ci.lb   ci.ub      
TypeBehaviour      0.5026  0.0720  6.9850  637  &lt;.0001   0.3613  0.6439  *** 
TypeLifeHistory    0.3531  0.1047  3.3712  637  0.0008   0.1474  0.5587  *** 
TypePhysiology     0.0120  0.1549  0.0773  637  0.9384  -0.2922  0.3161      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb418"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="co"># make other hetero</span></span>
<span id="cb418-2"><a href="#cb418-2" aria-hidden="true" tabindex="-1"></a>mod2e <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD,</span>
<span id="cb418-3"><a href="#cb418-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV,</span>
<span id="cb418-4"><a href="#cb418-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">mod =</span> <span class="sc">~</span> Type, </span>
<span id="cb418-5"><a href="#cb418-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb418-6"><a href="#cb418-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo, </span>
<span id="cb418-7"><a href="#cb418-7" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span>Type <span class="sc">|</span> Obs_ID), </span>
<span id="cb418-8"><a href="#cb418-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">struct =</span> <span class="st">"DIAG"</span>,</span>
<span id="cb418-9"><a href="#cb418-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb418-10"><a href="#cb418-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb418-11"><a href="#cb418-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb418-12"><a href="#cb418-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb420"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb420-1"><a href="#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod2e)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-870.7865  1741.5731  1757.5731  1793.2272  1757.8024   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0274  0.1656     90     no  FocalSpL 
sigma^2.2  0.1296  0.3600    116     no     RecNo 

outer factor: Obs_ID (nlvls = 640)
inner factor: Type   (nlvls = 3)

            estim    sqrt  k.lvl  fixed        level 
tau^2.1    0.6577  0.8110    434     no    Behaviour 
tau^2.2    0.3176  0.5636    112     no  LifeHistory 
tau^2.3    1.2391  1.1131     94     no   Physiology 

Test of Moderators (coefficients 2:3):
F(df1 = 2, df2 = 637) = 5.0637, p-val = 0.0066

Model Results:

                 estimate      se     tval   df    pval    ci.lb    ci.ub      
intrcpt            0.5026  0.0720   6.9850  637  &lt;.0001   0.3613   0.6439  *** 
TypeLifeHistory   -0.1495  0.1037  -1.4414  637  0.1500  -0.3533   0.0542      
TypePhysiology    -0.4906  0.1567  -3.1304  637  0.0018  -0.7984  -0.1829   ** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb422"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a>mod2f <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD,</span>
<span id="cb422-2"><a href="#cb422-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV,</span>
<span id="cb422-3"><a href="#cb422-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">mod =</span> <span class="sc">~</span> <span class="fu">relevel</span>(Type, <span class="at">ref =</span> <span class="st">"LifeHistory"</span>), </span>
<span id="cb422-4"><a href="#cb422-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb422-5"><a href="#cb422-5" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo, </span>
<span id="cb422-6"><a href="#cb422-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span>Type <span class="sc">|</span> Obs_ID), </span>
<span id="cb422-7"><a href="#cb422-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">struct =</span> <span class="st">"DIAG"</span>,</span>
<span id="cb422-8"><a href="#cb422-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb422-9"><a href="#cb422-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb422-10"><a href="#cb422-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb422-11"><a href="#cb422-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb424"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod2f)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-870.7865  1741.5731  1757.5731  1793.2272  1757.8024   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0274  0.1656     90     no  FocalSpL 
sigma^2.2  0.1296  0.3600    116     no     RecNo 

outer factor: Obs_ID (nlvls = 640)
inner factor: Type   (nlvls = 3)

            estim    sqrt  k.lvl  fixed        level 
tau^2.1    0.6577  0.8110    434     no    Behaviour 
tau^2.2    0.3176  0.5636    112     no  LifeHistory 
tau^2.3    1.2391  1.1131     94     no   Physiology 

Test of Moderators (coefficients 2:3):
F(df1 = 2, df2 = 637) = 5.0637, p-val = 0.0066

Model Results:

                                              estimate      se     tval   df 
intrcpt                                         0.3531  0.1047   3.3712  637 
relevel(Type, ref = "LifeHistory")Behaviour     0.1495  0.1037   1.4414  637 
relevel(Type, ref = "LifeHistory")Physiology   -0.3411  0.1614  -2.1131  637 
                                                pval    ci.lb    ci.ub      
intrcpt                                       0.0008   0.1474   0.5587  *** 
relevel(Type, ref = "LifeHistory")Behaviour   0.1500  -0.0542   0.3533      
relevel(Type, ref = "LifeHistory")Physiology  0.0350  -0.6581  -0.0241    * 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb426"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb426-1"><a href="#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="co"># heteroscadasticity model better than the homoscedasticity model</span></span>
<span id="cb426-2"><a href="#cb426-2" aria-hidden="true" tabindex="-1"></a><span class="co"># note LifeHistory has lowest variation but this may be expected? </span></span>
<span id="cb426-3"><a href="#cb426-3" aria-hidden="true" tabindex="-1"></a><span class="co"># as it is less flexiable (e.g. the number of eggs?)</span></span>
<span id="cb426-4"><a href="#cb426-4" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(mod2, mod2b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
        df       AIC       BIC      AICc    logLik     LRT   pval QE 
Full     8 1757.5731 1793.2272 1757.8024 -870.7865                NA 
Reduced  6 1785.4590 1812.1996 1785.5923 -886.7295 31.8859 &lt;.0001 NA </code></pre>
</div>
<div class="sourceCode cell-code" id="cb428"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod2b, </span>
<span id="cb428-2"><a href="#cb428-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Type"</span>,</span>
<span id="cb428-3"><a href="#cb428-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb428-4"><a href="#cb428-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>,</span>
<span id="cb428-5"><a href="#cb428-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">branch.size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-21-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="trait-categories" class="level3">
<h3 class="anchored" data-anchor-id="trait-categories">Trait categories</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb429"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb429-1"><a href="#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Category of responses</span></span>
<span id="cb429-2"><a href="#cb429-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-3"><a href="#cb429-3" aria-hidden="true" tabindex="-1"></a>mod3 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb429-4"><a href="#cb429-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb429-5"><a href="#cb429-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb429-6"><a href="#cb429-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo, </span>
<span id="cb429-7"><a href="#cb429-7" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID), </span>
<span id="cb429-8"><a href="#cb429-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">mod =</span> <span class="sc">~</span> Category <span class="sc">-</span> <span class="dv">1</span>, </span>
<span id="cb429-9"><a href="#cb429-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb429-10"><a href="#cb429-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb429-11"><a href="#cb429-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb429-12"><a href="#cb429-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb431"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb431-1"><a href="#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-879.5908  1759.1816  1781.1816  1830.1194  1781.6074   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0000  0.0001     90     no  FocalSpL 
sigma^2.2  0.1389  0.3727    116     no     RecNo 
sigma^2.3  0.6912  0.8314    640     no    Obs_ID 

Test of Moderators (coefficients 1:8):
F(df1 = 8, df2 = 632) = 7.2433, p-val &lt; .0001

Model Results:

                          estimate      se    tval   df    pval    ci.lb 
CategoryAntiPredator        0.4772  0.0924  5.1669  632  &lt;.0001   0.2959 
CategoryCondition           0.0027  0.1394  0.0191  632  0.9848  -0.2710 
CategoryCostlyBehaviours    0.4567  0.1784  2.5596  632  0.0107   0.1063 
CategoryHormones            0.1717  0.2914  0.5891  632  0.5560  -0.4006 
CategoryIntake              0.7554  0.1623  4.6539  632  &lt;.0001   0.4366 
CategoryParentalCare        0.4103  0.1076  3.8133  632  0.0002   0.1990 
CategoryPhenology           0.1927  0.1799  1.0711  632  0.2845  -0.1606 
Categoryreproduction        0.3366  0.1287  2.6159  632  0.0091   0.0839 
                           ci.ub      
CategoryAntiPredator      0.6586  *** 
CategoryCondition         0.2763      
CategoryCostlyBehaviours  0.8071    * 
CategoryHormones          0.7439      
CategoryIntake            1.0741  *** 
CategoryParentalCare      0.6216  *** 
CategoryPhenology         0.5459      
Categoryreproduction      0.5892   ** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb433"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod3)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          4.12          20.17 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb435"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb435-1"><a href="#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod3, </span>
<span id="cb435-2"><a href="#cb435-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Category"</span>,</span>
<span id="cb435-3"><a href="#cb435-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>, </span>
<span id="cb435-4"><a href="#cb435-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>,</span>
<span id="cb435-5"><a href="#cb435-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">angle =</span> <span class="dv">45</span>,</span>
<span id="cb435-6"><a href="#cb435-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">branch.size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="predactor-guild" class="level3">
<h3 class="anchored" data-anchor-id="predactor-guild">Predactor guild</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb436"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb436-1"><a href="#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Predactor guild</span></span>
<span id="cb436-2"><a href="#cb436-2" aria-hidden="true" tabindex="-1"></a><span class="co"># quite heterogeneous</span></span>
<span id="cb436-3"><a href="#cb436-3" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> this could be in random effects - think abou thtis a bit later</span></span>
<span id="cb436-4"><a href="#cb436-4" aria-hidden="true" tabindex="-1"></a>mod6 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb436-5"><a href="#cb436-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb436-6"><a href="#cb436-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb436-7"><a href="#cb436-7" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb436-8"><a href="#cb436-8" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb436-9"><a href="#cb436-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> PredGuild <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb436-10"><a href="#cb436-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb436-11"><a href="#cb436-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb436-12"><a href="#cb436-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb436-13"><a href="#cb436-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb438"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb438-1"><a href="#cb438-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod6)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-886.0833  1772.1665  1790.1665  1830.2350  1790.4550   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0231  0.1519     90     no  FocalSpL 
sigma^2.2  0.1418  0.3765    116     no     RecNo 
sigma^2.3  0.6884  0.8297    640     no    Obs_ID 

Test of Moderators (coefficients 1:6):
F(df1 = 6, df2 = 634) = 7.4143, p-val &lt; .0001

Model Results:

                  estimate      se     tval   df    pval    ci.lb   ci.ub      
PredGuildBird       0.4848  0.0790   6.1335  634  &lt;.0001   0.3296  0.6400  *** 
PredGuildFish      -0.1871  0.9107  -0.2054  634  0.8373  -1.9755  1.6013      
PredGuildMammal     0.2988  0.1305   2.2904  634  0.0223   0.0426  0.5551    * 
PredGuildmixed      0.1133  0.2515   0.4505  634  0.6525  -0.3805  0.6072      
PredGuildNS         0.6840  0.3025   2.2615  634  0.0241   0.0901  1.2779    * 
PredGuildReptile    0.3365  0.2838   1.1857  634  0.2362  -0.2208  0.8939      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb440"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb440-1"><a href="#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod6)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          2.20          21.09 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb442"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb442-1"><a href="#cb442-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod6, </span>
<span id="cb442-2"><a href="#cb442-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"PredGuild"</span>,</span>
<span id="cb442-3"><a href="#cb442-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb442-4"><a href="#cb442-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="setting" class="level3">
<h3 class="anchored" data-anchor-id="setting">Setting</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb443"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb443-1"><a href="#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting</span></span>
<span id="cb443-2"><a href="#cb443-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb443-3"><a href="#cb443-3" aria-hidden="true" tabindex="-1"></a>mod7 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb443-4"><a href="#cb443-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb443-5"><a href="#cb443-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb443-6"><a href="#cb443-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb443-7"><a href="#cb443-7" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb443-8"><a href="#cb443-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> Setting <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb443-9"><a href="#cb443-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb443-10"><a href="#cb443-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb443-11"><a href="#cb443-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb443-12"><a href="#cb443-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb445"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb445-1"><a href="#cb445-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod7)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-891.0585  1782.1169  1794.1169  1820.8575  1794.2502   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0172  0.1311     90     no  FocalSpL 
sigma^2.2  0.1378  0.3712    116     no     RecNo 
sigma^2.3  0.6868  0.8288    640     no    Obs_ID 

Test of Moderators (coefficients 1:3):
F(df1 = 3, df2 = 637) = 14.2658, p-val &lt; .0001

Model Results:

                     estimate      se     tval   df    pval    ci.lb   ci.ub 
SettingField           0.4245  0.0721   5.8846  637  &lt;.0001   0.2829  0.5662 
SettingLab             0.4764  0.1575   3.0247  637  0.0026   0.1671  0.7857 
SettingSemi-natural   -0.2054  0.4204  -0.4886  637  0.6253  -1.0308  0.6201 
                         
SettingField         *** 
SettingLab            ** 
SettingSemi-natural      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb447"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb447-1"><a href="#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod7)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          0.70          18.98 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb449"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb449-1"><a href="#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod7, </span>
<span id="cb449-2"><a href="#cb449-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Setting"</span>,</span>
<span id="cb449-3"><a href="#cb449-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb449-4"><a href="#cb449-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="season" class="level3">
<h3 class="anchored" data-anchor-id="season">Season</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb450"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb450-1"><a href="#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Season</span></span>
<span id="cb450-2"><a href="#cb450-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb450-3"><a href="#cb450-3" aria-hidden="true" tabindex="-1"></a>mod8 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb450-4"><a href="#cb450-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb450-5"><a href="#cb450-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb450-6"><a href="#cb450-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb450-7"><a href="#cb450-7" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb450-8"><a href="#cb450-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> Season <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb450-9"><a href="#cb450-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb450-10"><a href="#cb450-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb450-11"><a href="#cb450-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb450-12"><a href="#cb450-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb452"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb452-1"><a href="#cb452-1" aria-hidden="true" tabindex="-1"></a>mod8b <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb452-2"><a href="#cb452-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb452-3"><a href="#cb452-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb452-4"><a href="#cb452-4" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb452-5"><a href="#cb452-5" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb452-6"><a href="#cb452-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> Season,</span>
<span id="cb452-7"><a href="#cb452-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb452-8"><a href="#cb452-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb452-9"><a href="#cb452-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb452-10"><a href="#cb452-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb454"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb454-1"><a href="#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod8b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-892.1745  1784.3489  1794.3489  1816.6406  1794.4439   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0187  0.1368     90     no  FocalSpL 
sigma^2.2  0.1390  0.3728    116     no     RecNo 
sigma^2.3  0.6875  0.8291    640     no    Obs_ID 

Test of Moderators (coefficient 2):
F(df1 = 1, df2 = 638) = 2.3205, p-val = 0.1282

Model Results:

                    estimate      se    tval   df    pval    ci.lb   ci.ub      
intrcpt               0.3589  0.0783  4.5831  638  &lt;.0001   0.2051  0.5127  *** 
Seasonnon-breeding    0.2007  0.1318  1.5233  638  0.1282  -0.0580  0.4595      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb456"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod8)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          0.95          19.44 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb458"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod8,</span>
<span id="cb458-2"><a href="#cb458-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Season"</span>,</span>
<span id="cb458-3"><a href="#cb458-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb458-4"><a href="#cb458-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="design" class="level3">
<h3 class="anchored" data-anchor-id="design">Design</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb459"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb459-1"><a href="#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Design</span></span>
<span id="cb459-2"><a href="#cb459-2" aria-hidden="true" tabindex="-1"></a>mod9 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb459-3"><a href="#cb459-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb459-4"><a href="#cb459-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb459-5"><a href="#cb459-5" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb459-6"><a href="#cb459-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb459-7"><a href="#cb459-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> Design <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb459-8"><a href="#cb459-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb459-9"><a href="#cb459-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb459-10"><a href="#cb459-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb459-11"><a href="#cb459-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb461"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb461-1"><a href="#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod9)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-893.3891  1786.7783  1796.7783  1819.0700  1796.8732   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0103  0.1016     90     no  FocalSpL 
sigma^2.2  0.1481  0.3848    116     no     RecNo 
sigma^2.3  0.6879  0.8294    640     no    Obs_ID 

Test of Moderators (coefficients 1:2):
F(df1 = 2, df2 = 638) = 19.9969, p-val &lt; .0001

Model Results:

              estimate      se    tval   df    pval   ci.lb   ci.ub      
Designamong     0.4061  0.0874  4.6483  638  &lt;.0001  0.2345  0.5777  *** 
Designwithin    0.4197  0.0839  5.0006  638  &lt;.0001  0.2549  0.5844  *** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb463"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb463-1"><a href="#cb463-1" aria-hidden="true" tabindex="-1"></a>mod9b <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb463-2"><a href="#cb463-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb463-3"><a href="#cb463-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb463-4"><a href="#cb463-4" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb463-5"><a href="#cb463-5" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb463-6"><a href="#cb463-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> Design,</span>
<span id="cb463-7"><a href="#cb463-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb463-8"><a href="#cb463-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb463-9"><a href="#cb463-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb463-10"><a href="#cb463-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb465"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb465-1"><a href="#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod9b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-893.3891  1786.7783  1796.7783  1819.0700  1796.8732   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0103  0.1016     90     no  FocalSpL 
sigma^2.2  0.1481  0.3848    116     no     RecNo 
sigma^2.3  0.6879  0.8294    640     no    Obs_ID 

Test of Moderators (coefficient 2):
F(df1 = 1, df2 = 638) = 0.0150, p-val = 0.9026

Model Results:

              estimate      se    tval   df    pval    ci.lb   ci.ub      
intrcpt         0.4061  0.0874  4.6483  638  &lt;.0001   0.2345  0.5777  *** 
Designwithin    0.0135  0.1106  0.1225  638  0.9026  -0.2037  0.2308      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb467"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb467-1"><a href="#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod9)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          0.01          18.72 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb469"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb469-1"><a href="#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod9,</span>
<span id="cb469-2"><a href="#cb469-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Design"</span>,</span>
<span id="cb469-3"><a href="#cb469-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb469-4"><a href="#cb469-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="response-period" class="level3">
<h3 class="anchored" data-anchor-id="response-period">Response period</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb470"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb470-1"><a href="#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Response period</span></span>
<span id="cb470-2"><a href="#cb470-2" aria-hidden="true" tabindex="-1"></a>mod10 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb470-3"><a href="#cb470-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb470-4"><a href="#cb470-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb470-5"><a href="#cb470-5" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb470-6"><a href="#cb470-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb470-7"><a href="#cb470-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> ResponsePeriod <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb470-8"><a href="#cb470-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb470-9"><a href="#cb470-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb470-10"><a href="#cb470-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb470-11"><a href="#cb470-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb472"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb472-1"><a href="#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod10)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-892.5749  1785.1498  1795.1498  1817.4415  1795.2448   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0138  0.1176     90     no  FocalSpL 
sigma^2.2  0.1435  0.3788    116     no     RecNo 
sigma^2.3  0.6883  0.8296    640     no    Obs_ID 

Test of Moderators (coefficients 1:2):
F(df1 = 2, df2 = 638) = 20.8414, p-val &lt; .0001

Model Results:

                      estimate      se    tval   df    pval   ci.lb   ci.ub 
ResponsePeriodafter     0.3500  0.0851  4.1108  638  &lt;.0001  0.1828  0.5171 
ResponsePeriodduring    0.4938  0.0903  5.4708  638  &lt;.0001  0.3166  0.6711 
                          
ResponsePeriodafter   *** 
ResponsePeriodduring  *** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb474"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb474-1"><a href="#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod10)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          0.61          19.10 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb476"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb476-1"><a href="#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod10,</span>
<span id="cb476-2"><a href="#cb476-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"ResponsePeriod"</span>,</span>
<span id="cb476-3"><a href="#cb476-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb476-4"><a href="#cb476-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="control-type" class="level3">
<h3 class="anchored" data-anchor-id="control-type">Control type</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb477"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb477-1"><a href="#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="co"># control type</span></span>
<span id="cb477-2"><a href="#cb477-2" aria-hidden="true" tabindex="-1"></a>mod11 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb477-3"><a href="#cb477-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb477-4"><a href="#cb477-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb477-5"><a href="#cb477-5" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb477-6"><a href="#cb477-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb477-7"><a href="#cb477-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> ControlType <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb477-8"><a href="#cb477-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb477-9"><a href="#cb477-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb477-10"><a href="#cb477-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb477-11"><a href="#cb477-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb479"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb479-1"><a href="#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod11)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-891.3557  1782.7115  1796.7115  1827.8979  1796.8898   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0080  0.0893     90     no  FocalSpL 
sigma^2.2  0.1504  0.3879    116     no     RecNo 
sigma^2.3  0.6901  0.8307    640     no    Obs_ID 

Test of Moderators (coefficients 1:4):
F(df1 = 4, df2 = 636) = 10.0508, p-val &lt; .0001

Model Results:

                        estimate      se    tval   df    pval    ci.lb   ci.ub 
ControlTypeBlank          0.4424  0.0947  4.6709  636  &lt;.0001   0.2564  0.6283 
ControlTypedisturbance    0.4170  0.1452  2.8710  636  0.0042   0.1318  0.7022 
ControlTypemix            0.4533  0.9429  0.4807  636  0.6309  -1.3983  2.3049 
ControlTypeNonPred        0.3895  0.0810  4.8106  636  &lt;.0001   0.2305  0.5485 
                            
ControlTypeBlank        *** 
ControlTypedisturbance   ** 
ControlTypemix              
ControlTypeNonPred      *** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb481"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb481-1"><a href="#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod11)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          0.07          18.73 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb483"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb483-1"><a href="#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod11,</span>
<span id="cb483-2"><a href="#cb483-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"ControlType"</span>,</span>
<span id="cb483-3"><a href="#cb483-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb483-4"><a href="#cb483-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="sex" class="level3">
<h3 class="anchored" data-anchor-id="sex">Sex</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb484"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb484-1"><a href="#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sex</span></span>
<span id="cb484-2"><a href="#cb484-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">TODO</span><span class="co"> - this could be interesting</span></span>
<span id="cb484-3"><a href="#cb484-3" aria-hidden="true" tabindex="-1"></a><span class="co"># what is in males and females</span></span>
<span id="cb484-4"><a href="#cb484-4" aria-hidden="true" tabindex="-1"></a>mod12 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb484-5"><a href="#cb484-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb484-6"><a href="#cb484-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb484-7"><a href="#cb484-7" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb484-8"><a href="#cb484-8" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb484-9"><a href="#cb484-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> Sex <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb484-10"><a href="#cb484-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb484-11"><a href="#cb484-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb484-12"><a href="#cb484-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb484-13"><a href="#cb484-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb486"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb486-1"><a href="#cb486-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod12)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-890.5710  1781.1420  1793.1420  1819.8826  1793.2753   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0099  0.0993     90     no  FocalSpL 
sigma^2.2  0.1354  0.3680    116     no     RecNo 
sigma^2.3  0.6906  0.8310    640     no    Obs_ID 

Test of Moderators (coefficients 1:3):
F(df1 = 3, df2 = 637) = 15.0441, p-val &lt; .0001

Model Results:

         estimate      se    tval   df    pval   ci.lb   ci.ub      
Sexboth    0.4706  0.0758  6.2110  637  &lt;.0001  0.3218  0.6193  *** 
SexF       0.2579  0.1011  2.5501  637  0.0110  0.0593  0.4565    * 
SexM       0.4309  0.1325  3.2515  637  0.0012  0.1707  0.6912   ** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb488"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb488-1"><a href="#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod12)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          0.95          18.17 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb490"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb490-1"><a href="#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod12,</span>
<span id="cb490-2"><a href="#cb490-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Sex"</span>,</span>
<span id="cb490-3"><a href="#cb490-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb490-4"><a href="#cb490-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb491"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb491-1"><a href="#cb491-1" aria-hidden="true" tabindex="-1"></a><span class="co"># shoter data for just males and females</span></span>
<span id="cb491-2"><a href="#cb491-2" aria-hidden="true" tabindex="-1"></a><span class="co"># hetero but no sex effect here</span></span>
<span id="cb491-3"><a href="#cb491-3" aria-hidden="true" tabindex="-1"></a>dat_sex <span class="ot">&lt;-</span> dat <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sex <span class="sc">!=</span> <span class="st">"both"</span>)</span>
<span id="cb491-4"><a href="#cb491-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb491-5"><a href="#cb491-5" aria-hidden="true" tabindex="-1"></a>VCV3 <span class="ot">&lt;-</span> <span class="fu">vcalc</span>(<span class="at">vi =</span> dat_sex<span class="sc">$</span>Vd,</span>
<span id="cb491-6"><a href="#cb491-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">cluster =</span> dat_sex<span class="sc">$</span>SubjectID,</span>
<span id="cb491-7"><a href="#cb491-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">rho =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 48.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 110.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 107.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 64.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 112.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 40.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 33.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 102.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 17.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 103.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 37.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 137.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 111.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 122.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 117.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 20.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 24.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 25.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 26.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 27.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 28.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 119.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 130.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 59.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 120.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 8.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 9.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 104.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 124.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 7.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster s.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 60.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 106.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 94.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 87.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 47.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 134.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 31.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 78.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 127.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 105.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster e.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster g.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster f.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 22.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 123.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 125.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The var-cov matrix appears to be not positive definite in cluster 126.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb540"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb540-1"><a href="#cb540-1" aria-hidden="true" tabindex="-1"></a>mod12a <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb540-2"><a href="#cb540-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">V =</span> VCV3, </span>
<span id="cb540-3"><a href="#cb540-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">mod =</span> <span class="sc">~</span> Sex, </span>
<span id="cb540-4"><a href="#cb540-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb540-5"><a href="#cb540-5" aria-hidden="true" tabindex="-1"></a>                               <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo, </span>
<span id="cb540-6"><a href="#cb540-6" aria-hidden="true" tabindex="-1"></a>                               <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID), </span>
<span id="cb540-7"><a href="#cb540-7" aria-hidden="true" tabindex="-1"></a>                 <span class="co">#struct = "DIAG",</span></span>
<span id="cb540-8"><a href="#cb540-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb540-9"><a href="#cb540-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb540-10"><a href="#cb540-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb540-11"><a href="#cb540-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> dat_sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Redundant predictors dropped from the model.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb543"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb543-1"><a href="#cb543-1" aria-hidden="true" tabindex="-1"></a>mod12b <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb543-2"><a href="#cb543-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">V =</span> VCV3, </span>
<span id="cb543-3"><a href="#cb543-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">mod =</span> <span class="sc">~</span> Sex, </span>
<span id="cb543-4"><a href="#cb543-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb543-5"><a href="#cb543-5" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo, </span>
<span id="cb543-6"><a href="#cb543-6" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">~</span>Sex <span class="sc">|</span> Obs_ID), </span>
<span id="cb543-7"><a href="#cb543-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">struct =</span> <span class="st">"DIAG"</span>,</span>
<span id="cb543-8"><a href="#cb543-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb543-9"><a href="#cb543-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb543-10"><a href="#cb543-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb543-11"><a href="#cb543-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> dat_sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.

Warning: Redundant predictors dropped from the model.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb545"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb545-1"><a href="#cb545-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod12b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 242; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-260.7712   521.5424   533.5424   554.4262   533.9029   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0983  0.3136     36     no  FocalSpL 
sigma^2.2  0.0000  0.0002     49     no     RecNo 

outer factor: Obs_ID (nlvls = 242)
inner factor: Sex    (nlvls = 2)

            estim    sqrt  k.lvl  fixed  level 
tau^2.1    0.3015  0.5491    158     no      F 
tau^2.2    0.6644  0.8151     84     no      M 

Test of Moderators (coefficient 2):
F(df1 = 1, df2 = 240) = 2.7884, p-val = 0.0963

Model Results:

         estimate      se     tval   df    pval    ci.lb   ci.ub      
intrcpt    0.4995  0.1287   3.8826  240  0.0001   0.2461  0.7529  *** 
SexF      -0.2049  0.1227  -1.6698  240  0.0963  -0.4466  0.0368    . 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb547"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb547-1"><a href="#cb547-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anova</span>(mod12a, mod12b)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
        df      AIC      BIC     AICc    logLik     LRT   pval QE 
Full     6 533.5424 554.4262 533.9029 -260.7712                NA 
Reduced  5 542.3039 559.7071 542.5604 -266.1520 10.7616 0.0010 NA </code></pre>
</div>
<div class="sourceCode cell-code" id="cb549"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb549-1"><a href="#cb549-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod12b,</span>
<span id="cb549-2"><a href="#cb549-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Sex"</span>,</span>
<span id="cb549-3"><a href="#cb549-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb549-4"><a href="#cb549-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-29-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="age" class="level3">
<h3 class="anchored" data-anchor-id="age">Age</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb550"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb550-1"><a href="#cb550-1" aria-hidden="true" tabindex="-1"></a><span class="co"># age</span></span>
<span id="cb550-2"><a href="#cb550-2" aria-hidden="true" tabindex="-1"></a>mod13 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb550-3"><a href="#cb550-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb550-4"><a href="#cb550-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb550-5"><a href="#cb550-5" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb550-6"><a href="#cb550-6" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb550-7"><a href="#cb550-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> Age <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb550-8"><a href="#cb550-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb550-9"><a href="#cb550-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb550-10"><a href="#cb550-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb550-11"><a href="#cb550-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb552"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb552-1"><a href="#cb552-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod13)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-889.5226  1779.0452  1795.0452  1830.6742  1795.2752   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0085  0.0920     90     no  FocalSpL 
sigma^2.2  0.1498  0.3870    116     no     RecNo 
sigma^2.3  0.6911  0.8313    640     no    Obs_ID 

Test of Moderators (coefficients 1:5):
F(df1 = 5, df2 = 635) = 8.2299, p-val &lt; .0001

Model Results:

      estimate      se    tval   df    pval    ci.lb   ci.ub      
Age     1.1117  0.8092  1.3739  635  0.1699  -0.4772  2.7007      
AgeA    0.4207  0.0677  6.2134  635  &lt;.0001   0.2877  0.5536  *** 
AgeE    0.3229  0.3452  0.9356  635  0.3498  -0.3548  1.0007      
AgeJ    0.2881  0.3484  0.8269  635  0.4086  -0.3961  0.9723      
AgeN    0.3266  0.1911  1.7093  635  0.0879  -0.0486  0.7019    . 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb554"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb554-1"><a href="#cb554-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod13)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          0.33          18.90 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb556"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb556-1"><a href="#cb556-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod13,</span>
<span id="cb556-2"><a href="#cb556-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Age"</span>,</span>
<span id="cb556-3"><a href="#cb556-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb556-4"><a href="#cb556-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="predactor-type" class="level3">
<h3 class="anchored" data-anchor-id="predactor-type">Predactor type</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb557"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb557-1"><a href="#cb557-1" aria-hidden="true" tabindex="-1"></a><span class="co"># type of predator</span></span>
<span id="cb557-2"><a href="#cb557-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb557-3"><a href="#cb557-3" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>PredTo[dat<span class="sc">$</span>PredTo <span class="sc">==</span> <span class="st">""</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb557-4"><a href="#cb557-4" aria-hidden="true" tabindex="-1"></a>mod14 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb557-5"><a href="#cb557-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV, </span>
<span id="cb557-6"><a href="#cb557-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb557-7"><a href="#cb557-7" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb557-8"><a href="#cb557-8" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb557-9"><a href="#cb557-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> PredTo <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb557-10"><a href="#cb557-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb557-11"><a href="#cb557-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb557-12"><a href="#cb557-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb557-13"><a href="#cb557-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 19 rows with NAs omitted from model fitting.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Redundant predictors dropped from the model.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb561"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb561-1"><a href="#cb561-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod14)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 621; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-861.2315  1722.4629  1734.4629  1761.0219  1734.6004   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0000  0.0003     85     no  FocalSpL 
sigma^2.2  0.1572  0.3965    110     no     RecNo 
sigma^2.3  0.6805  0.8249    621     no    Obs_ID 

Test of Moderators (coefficients 1:3):
F(df1 = 3, df2 = 618) = 12.3559, p-val &lt; .0001

Model Results:

         estimate      se    tval   df    pval    ci.lb   ci.ub      
PredToA    0.4284  0.0814  5.2628  618  &lt;.0001   0.2686  0.5883  *** 
PredToB    0.3772  0.3065  1.2306  618  0.2190  -0.2247  0.9791      
PredToN    0.3337  0.0915  3.6466  618  0.0003   0.1540  0.5135  *** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb563"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb563-1"><a href="#cb563-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod14)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          0.25          18.97 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb565"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb565-1"><a href="#cb565-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod14,</span>
<span id="cb565-2"><a href="#cb565-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"PredTo"</span>,</span>
<span id="cb565-3"><a href="#cb565-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb565-4"><a href="#cb565-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="treatment-duration" class="level3">
<h3 class="anchored" data-anchor-id="treatment-duration">Treatment duration</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb566"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb566-1"><a href="#cb566-1" aria-hidden="true" tabindex="-1"></a><span class="co"># treatment duration</span></span>
<span id="cb566-2"><a href="#cb566-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb566-3"><a href="#cb566-3" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>ln_duration <span class="ot">&lt;-</span> <span class="fu">log</span>(dat<span class="sc">$</span>duration_days)</span>
<span id="cb566-4"><a href="#cb566-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb566-5"><a href="#cb566-5" aria-hidden="true" tabindex="-1"></a>mod15 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD,</span>
<span id="cb566-6"><a href="#cb566-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV,</span>
<span id="cb566-7"><a href="#cb566-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL,</span>
<span id="cb566-8"><a href="#cb566-8" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb566-9"><a href="#cb566-9" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb566-10"><a href="#cb566-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> ln_duration,</span>
<span id="cb566-11"><a href="#cb566-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb566-12"><a href="#cb566-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb566-13"><a href="#cb566-13" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb566-14"><a href="#cb566-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb568"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb568-1"><a href="#cb568-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod15)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-889.1410  1778.2821  1788.2821  1810.5738  1788.3770   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0000  0.0001     90     no  FocalSpL 
sigma^2.2  0.1518  0.3897    116     no     RecNo 
sigma^2.3  0.6888  0.8300    640     no    Obs_ID 

Test of Moderators (coefficient 2):
F(df1 = 1, df2 = 638) = 8.4146, p-val = 0.0039

Model Results:

             estimate      se     tval   df    pval    ci.lb    ci.ub      
intrcpt        0.3710  0.0634   5.8526  638  &lt;.0001   0.2465   0.4955  *** 
ln_duration   -0.0455  0.0157  -2.9008  638  0.0039  -0.0763  -0.0147   ** 

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb570"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb570-1"><a href="#cb570-1" aria-hidden="true" tabindex="-1"></a>mod16 <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD,</span>
<span id="cb570-2"><a href="#cb570-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCV,</span>
<span id="cb570-3"><a href="#cb570-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL,</span>
<span id="cb570-4"><a href="#cb570-4" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb570-5"><a href="#cb570-5" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb570-6"><a href="#cb570-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> ln_duration<span class="sc">*</span>Type,</span>
<span id="cb570-7"><a href="#cb570-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb570-8"><a href="#cb570-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb570-9"><a href="#cb570-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb570-10"><a href="#cb570-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb572"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb572-1"><a href="#cb572-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod16)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-880.1624  1760.3248  1778.3248  1818.3933  1778.6133   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0000  0.0001     90     no  FocalSpL 
sigma^2.2  0.1427  0.3777    116     no     RecNo 
sigma^2.3  0.6882  0.8296    640     no    Obs_ID 

Test of Moderators (coefficients 2:6):
F(df1 = 5, df2 = 634) = 3.5544, p-val = 0.0035

Model Results:

                             estimate      se     tval   df    pval    ci.lb 
intrcpt                        0.4394  0.0717   6.1286  634  &lt;.0001   0.2986 
ln_duration                   -0.0411  0.0173  -2.3802  634  0.0176  -0.0750 
TypeLifeHistory               -0.3341  0.3591  -0.9302  634  0.3526  -1.0393 
TypePhysiology                -0.4638  0.1637  -2.8326  634  0.0048  -0.7853 
ln_duration:TypeLifeHistory    0.0837  0.1012   0.8265  634  0.4088  -0.1151 
ln_duration:TypePhysiology     0.0438  0.0495   0.8849  634  0.3765  -0.0534 
                               ci.ub      
intrcpt                       0.5802  *** 
ln_duration                  -0.0072    * 
TypeLifeHistory               0.3712      
TypePhysiology               -0.1423   ** 
ln_duration:TypeLifeHistory   0.2825      
ln_duration:TypePhysiology    0.1409      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb574"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb574-1"><a href="#cb574-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod15)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          3.43          20.87 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb576"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb576-1"><a href="#cb576-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bubble_plot</span>(mod15,</span>
<span id="cb576-2"><a href="#cb576-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"ln_duration"</span>,</span>
<span id="cb576-3"><a href="#cb576-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb576-4"><a href="#cb576-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"log(duration in days)"</span>,</span>
<span id="cb576-5"><a href="#cb576-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">g =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb576-6"><a href="#cb576-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">data =</span> dat,</span>
<span id="cb576-7"><a href="#cb576-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> ln_duration, <span class="at">y =</span> SMD,</span>
<span id="cb576-8"><a href="#cb576-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> Type,</span>
<span id="cb576-9"><a href="#cb576-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> Type,</span>
<span id="cb576-10"><a href="#cb576-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">1</span><span class="sc">/</span><span class="fu">sqrt</span>(Vd)), <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb576-11"><a href="#cb576-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_discrete</span>() <span class="sc">+</span> <span class="co">#+ # how to put the legend for colour</span></span>
<span id="cb576-12"><a href="#cb576-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">"legend"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb577"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb577-1"><a href="#cb577-1" aria-hidden="true" tabindex="-1"></a><span class="co">#p + geom_point(aes(colour = Type))</span></span>
<span id="cb577-2"><a href="#cb577-2" aria-hidden="true" tabindex="-1"></a><span class="co">#scale_colour_manual(values = c("red", "blue", "green"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="meta-regression-multi-moderator-mostly" class="level2">
<h2 class="anchored" data-anchor-id="meta-regression-multi-moderator-mostly">Meta-regression: multi-moderator (mostly)</h2>
<section id="full-models" class="level3">
<h3 class="anchored" data-anchor-id="full-models">full models</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb578"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb578-1"><a href="#cb578-1" aria-hidden="true" tabindex="-1"></a><span class="do">#######################</span></span>
<span id="cb578-2"><a href="#cb578-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Mulit-variable models</span></span>
<span id="cb578-3"><a href="#cb578-3" aria-hidden="true" tabindex="-1"></a><span class="do">#######################</span></span>
<span id="cb578-4"><a href="#cb578-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb578-5"><a href="#cb578-5" aria-hidden="true" tabindex="-1"></a>dat_short<span class="sc">$</span>sln_duration <span class="ot">&lt;-</span> <span class="fu">scale</span>(<span class="fu">log</span>(dat_short<span class="sc">$</span>duration_days))</span>
<span id="cb578-6"><a href="#cb578-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb578-7"><a href="#cb578-7" aria-hidden="true" tabindex="-1"></a>mod_full <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb578-8"><a href="#cb578-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">V =</span> VCVs, </span>
<span id="cb578-9"><a href="#cb578-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb578-10"><a href="#cb578-10" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb578-11"><a href="#cb578-11" aria-hidden="true" tabindex="-1"></a>                             <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb578-12"><a href="#cb578-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">mods =</span>  <span class="sc">~</span> <span class="co">#Design +</span></span>
<span id="cb578-13"><a href="#cb578-13" aria-hidden="true" tabindex="-1"></a>                         sln_duration<span class="sc">*</span>Type <span class="sc">+</span></span>
<span id="cb578-14"><a href="#cb578-14" aria-hidden="true" tabindex="-1"></a>                         sln_duration<span class="sc">*</span>Treat_mod <span class="sc">+</span></span>
<span id="cb578-15"><a href="#cb578-15" aria-hidden="true" tabindex="-1"></a>                         Sex,</span>
<span id="cb578-16"><a href="#cb578-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb578-17"><a href="#cb578-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb578-18"><a href="#cb578-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb578-19"><a href="#cb578-19" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> dat_short)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb580"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb580-1"><a href="#cb580-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_full)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 600; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-826.1989  1652.3977  1682.3977  1748.0486  1683.2369   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0000  0.0001     81     no  FocalSpL 
sigma^2.2  0.1540  0.3925    104     no     RecNo 
sigma^2.3  0.7169  0.8467    600     no    Obs_ID 

Test of Moderators (coefficients 2:12):
F(df1 = 11, df2 = 588) = 2.0578, p-val = 0.0216

Model Results:

                              estimate      se     tval   df    pval    ci.lb 
intrcpt                         0.4853  0.1076   4.5122  588  &lt;.0001   0.2741 
sln_duration                   -0.1333  0.0896  -1.4886  588  0.1371  -0.3093 
TypeLifeHistory                -0.0267  0.4683  -0.0569  588  0.9546  -0.9463 
TypePhysiology                 -0.5076  0.1840  -2.7580  588  0.0060  -0.8691 
Treat_modV                      0.0477  0.1461   0.3264  588  0.7442  -0.2393 
Treat_modAV                     0.1566  0.1656   0.9455  588  0.3448  -0.1687 
SexF                           -0.2748  0.1295  -2.1219  588  0.0343  -0.5291 
SexM                           -0.0870  0.1531  -0.5679  588  0.5703  -0.3877 
sln_duration:TypeLifeHistory    0.1502  0.4474   0.3358  588  0.7372  -0.7284 
sln_duration:TypePhysiology     0.2185  0.1995   1.0952  588  0.2739  -0.1733 
sln_duration:Treat_modV        -0.0308  0.1418  -0.2168  588  0.8284  -0.3093 
sln_duration:Treat_modAV       -0.1650  0.1804  -0.9150  588  0.3606  -0.5193 
                                ci.ub      
intrcpt                        0.6966  *** 
sln_duration                   0.0426      
TypeLifeHistory                0.8930      
TypePhysiology                -0.1461   ** 
Treat_modV                     0.3347      
Treat_modAV                    0.4818      
SexF                          -0.0205    * 
SexM                           0.2138      
sln_duration:TypeLifeHistory   1.0289      
sln_duration:TypePhysiology    0.6103      
sln_duration:Treat_modV        0.2478      
sln_duration:Treat_modAV       0.1892      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb582"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb582-1"><a href="#cb582-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">r2_ml</span>(mod_full)<span class="sc">*</span><span class="dv">100</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   R2_marginal R2_conditional 
          7.06          23.50 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb584"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb584-1"><a href="#cb584-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod_full,</span>
<span id="cb584-2"><a href="#cb584-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Type"</span>,</span>
<span id="cb584-3"><a href="#cb584-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>, </span>
<span id="cb584-4"><a href="#cb584-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>,</span>
<span id="cb584-5"><a href="#cb584-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">branch.size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>NOTE: Results may be misleading due to involvement in interactions</code></pre>
</div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb586"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb586-1"><a href="#cb586-1" aria-hidden="true" tabindex="-1"></a><span class="fu">orchard_plot</span>(mod_full,</span>
<span id="cb586-2"><a href="#cb586-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">mod =</span> <span class="st">"Treat_mod"</span>,</span>
<span id="cb586-3"><a href="#cb586-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">group =</span> <span class="st">"RecNo"</span>, </span>
<span id="cb586-4"><a href="#cb586-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xlab =</span> <span class="st">"Standardised mean differnece (SMD)"</span>,</span>
<span id="cb586-5"><a href="#cb586-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">branch.size =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>NOTE: Results may be misleading due to involvement in interactions</code></pre>
</div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-33-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb588"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb588-1"><a href="#cb588-1" aria-hidden="true" tabindex="-1"></a>int_type <span class="ot">&lt;-</span> <span class="fu">mod_results</span>(mod_full, <span class="at">mod =</span> <span class="st">"sln_duration"</span>, <span class="at">group =</span> <span class="st">"RecNo"</span>, <span class="at">weights =</span> <span class="st">"prop"</span>,</span>
<span id="cb588-2"><a href="#cb588-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">by =</span> <span class="st">"Type"</span>)</span>
<span id="cb588-3"><a href="#cb588-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb588-4"><a href="#cb588-4" aria-hidden="true" tabindex="-1"></a><span class="fu">bubble_plot</span>(int_type, <span class="at">group =</span> <span class="st">"RecNo"</span>, <span class="at">mod =</span> <span class="st">"sln_duration"</span>, <span class="at">xlab =</span> <span class="st">"ln(duration in days)"</span>,</span>
<span id="cb588-5"><a href="#cb588-5" aria-hidden="true" tabindex="-1"></a>                     <span class="at">legend.pos =</span> <span class="st">"top.left"</span>, <span class="at">condition.nrow =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-33-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb589"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb589-1"><a href="#cb589-1" aria-hidden="true" tabindex="-1"></a>int_trt <span class="ot">&lt;-</span> <span class="fu">mod_results</span>(mod_full, <span class="at">mod =</span> <span class="st">"sln_duration"</span>, <span class="at">group =</span> <span class="st">"RecNo"</span>, <span class="at">weights =</span> <span class="st">"prop"</span>,</span>
<span id="cb589-2"><a href="#cb589-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">by =</span> <span class="st">"Treat_mod"</span>)</span>
<span id="cb589-3"><a href="#cb589-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb589-4"><a href="#cb589-4" aria-hidden="true" tabindex="-1"></a><span class="fu">bubble_plot</span>(int_trt, <span class="at">group =</span> <span class="st">"RecNo"</span>, <span class="at">mod =</span> <span class="st">"sln_duration"</span>, <span class="at">xlab =</span> <span class="st">"ln(duration in days)"</span>,</span>
<span id="cb589-5"><a href="#cb589-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">legend.pos =</span> <span class="st">"top.left"</span>, <span class="at">condition.nrow =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-33-4.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb590"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb590-1"><a href="#cb590-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mulit-model selection</span></span>
<span id="cb590-2"><a href="#cb590-2" aria-hidden="true" tabindex="-1"></a>candidates <span class="ot">&lt;-</span> <span class="fu">dredge</span>(mod_full, <span class="at">trace =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Fixed term is "(Intercept)"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |                                                                      |   0%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #0
[599] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |=                                                                     |   2%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #1
[597] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |==                                                                    |   3%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #2
[598] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |===                                                                   |   5%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #3
[596] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |====                                                                  |   6%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #4
[597] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |=====                                                                 |   8%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #5
[595] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |=======                                                               |   9%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #6
[596] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |========                                                              |  11%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #7
[594] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |=========                                                             |  12%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #8
[597] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |==========                                                            |  14%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #9
[595] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |===========                                                           |  16%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #10
[596] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |============                                                          |  17%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #11
[594] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |=============                                                         |  19%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #12
[595] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |==============                                                        |  20%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #13
[593] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |===============                                                       |  22%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #14
[594] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |================                                                      |  23%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #15
[592] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |========================                                              |  34%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #22
[594] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |=========================                                             |  36%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #23
[592] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |=================================                                     |  47%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #30
[592] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |==================================                                    |  48%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #31
[590] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |==============================================                        |  66%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #42
[594] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |===============================================                       |  67%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #43
[592] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |==================================================                    |  72%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #46
[592] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |===================================================                   |  73%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #47
[590] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |====================================================================  |  97%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in dredge(mod_full, trace = 2): number of observations in model #62
[590] different from that in global model [588]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  |                                                                            
  |===================================================================== |  98%</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb669"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb669-1"><a href="#cb669-1" aria-hidden="true" tabindex="-1"></a><span class="co"># displays delta AICc &lt;2</span></span>
<span id="cb669-2"><a href="#cb669-2" aria-hidden="true" tabindex="-1"></a>candidates_aic2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(candidates, delta <span class="sc">&lt;</span> <span class="dv">5</span>) </span>
<span id="cb669-3"><a href="#cb669-3" aria-hidden="true" tabindex="-1"></a><span class="co"># model averaging</span></span>
<span id="cb669-4"><a href="#cb669-4" aria-hidden="true" tabindex="-1"></a>mr_averaged_aic2 <span class="ot">&lt;-</span> <span class="fu">summary</span>(<span class="fu">model.avg</span>(candidates, delta <span class="sc">&lt;</span> <span class="dv">5</span>)) </span>
<span id="cb669-5"><a href="#cb669-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-6"><a href="#cb669-6" aria-hidden="true" tabindex="-1"></a><span class="co"># relative importance of each predictor for all the models</span></span>
<span id="cb669-7"><a href="#cb669-7" aria-hidden="true" tabindex="-1"></a>importance <span class="ot">&lt;-</span> <span class="fu">sw</span>(candidates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="publication-bias" class="level2">
<h2 class="anchored" data-anchor-id="publication-bias">Publication bias</h2>
<section id="funnel-plot-uni-moderator" class="level3">
<h3 class="anchored" data-anchor-id="funnel-plot-uni-moderator">Funnel plot: uni-moderator</h3>
</section>
<section id="funnel-plot-multi-moderator" class="level3">
<h3 class="anchored" data-anchor-id="funnel-plot-multi-moderator">Funnel plot: multi-moderator</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb670"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb670-1"><a href="#cb670-1" aria-hidden="true" tabindex="-1"></a><span class="fu">funnel</span>(mod0r, </span>
<span id="cb670-2"><a href="#cb670-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">yaxis=</span><span class="st">"seinv"</span>,</span>
<span id="cb670-3"><a href="#cb670-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">type =</span> <span class="st">"rstudent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb671"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb671-1"><a href="#cb671-1" aria-hidden="true" tabindex="-1"></a><span class="fu">funnel</span>(mod_full, </span>
<span id="cb671-2"><a href="#cb671-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">yaxis=</span><span class="st">"seinv"</span>,</span>
<span id="cb671-3"><a href="#cb671-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">type =</span> <span class="st">"rstudent"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="egger-regression-uni-moderator" class="level3">
<h3 class="anchored" data-anchor-id="egger-regression-uni-moderator">Egger regression: uni-moderator</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb672"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb672-1"><a href="#cb672-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Egger</span></span>
<span id="cb672-2"><a href="#cb672-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb672-3"><a href="#cb672-3" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>effectN <span class="ot">&lt;-</span> (dat<span class="sc">$</span>Ncontrol <span class="sc">*</span> dat<span class="sc">$</span>NTreat) <span class="sc">/</span> (dat<span class="sc">$</span>Ncontrol <span class="sc">+</span> dat<span class="sc">$</span>NTreat)</span>
<span id="cb672-4"><a href="#cb672-4" aria-hidden="true" tabindex="-1"></a>dat<span class="sc">$</span>sqeffectN <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(dat<span class="sc">$</span>effectN)</span>
<span id="cb672-5"><a href="#cb672-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb672-6"><a href="#cb672-6" aria-hidden="true" tabindex="-1"></a>mod0e <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD,</span>
<span id="cb672-7"><a href="#cb672-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">V =</span> VCV,</span>
<span id="cb672-8"><a href="#cb672-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">mods =</span> <span class="sc">~</span> sqeffectN,</span>
<span id="cb672-9"><a href="#cb672-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">random =</span> <span class="fu">list</span>(<span class="co">#~1 | Phylo,</span></span>
<span id="cb672-10"><a href="#cb672-10" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> FocalSpL,</span>
<span id="cb672-11"><a href="#cb672-11" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb672-12"><a href="#cb672-12" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#~1 | SubjectID, # incoprated as VCV</span></span>
<span id="cb672-13"><a href="#cb672-13" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb672-14"><a href="#cb672-14" aria-hidden="true" tabindex="-1"></a>                <span class="co">#R = list(Phylo = cor_tree),</span></span>
<span id="cb672-15"><a href="#cb672-15" aria-hidden="true" tabindex="-1"></a>                <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb672-16"><a href="#cb672-16" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb672-17"><a href="#cb672-17" aria-hidden="true" tabindex="-1"></a>                <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb672-18"><a href="#cb672-18" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb674"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb674-1"><a href="#cb674-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod0e)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-893.0018  1786.0037  1796.0037  1818.2954  1796.0986   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0000  0.0003     90     no  FocalSpL 
sigma^2.2  0.1483  0.3850    116     no     RecNo 
sigma^2.3  0.6929  0.8324    640     no    Obs_ID 

Test of Moderators (coefficient 2):
F(df1 = 1, df2 = 638) = 1.0650, p-val = 0.3025

Model Results:

           estimate      se     tval   df    pval    ci.lb   ci.ub      
intrcpt      0.5044  0.1194   4.2234  638  &lt;.0001   0.2699  0.7390  *** 
sqeffectN   -0.0291  0.0282  -1.0320  638  0.3025  -0.0844  0.0262      

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb676"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb676-1"><a href="#cb676-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bubble_plot</span>(mod0e,</span>
<span id="cb676-2"><a href="#cb676-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">mod =</span> <span class="st">"sqeffectN"</span>,</span>
<span id="cb676-3"><a href="#cb676-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb676-4"><a href="#cb676-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">xlab =</span> <span class="st">"Effective N"</span>,</span>
<span id="cb676-5"><a href="#cb676-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">g =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="decline-effect-uni-moderator" class="level3">
<h3 class="anchored" data-anchor-id="decline-effect-uni-moderator">Decline effect: uni-moderator</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb677"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb677-1"><a href="#cb677-1" aria-hidden="true" tabindex="-1"></a><span class="co"># decline effect</span></span>
<span id="cb677-2"><a href="#cb677-2" aria-hidden="true" tabindex="-1"></a>mod0d <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD,</span>
<span id="cb677-3"><a href="#cb677-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">V =</span> VCV,</span>
<span id="cb677-4"><a href="#cb677-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">mods =</span> <span class="sc">~</span> Year,</span>
<span id="cb677-5"><a href="#cb677-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">random =</span> <span class="fu">list</span>(<span class="co">#~1 | Phylo,</span></span>
<span id="cb677-6"><a href="#cb677-6" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> FocalSpL,</span>
<span id="cb677-7"><a href="#cb677-7" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb677-8"><a href="#cb677-8" aria-hidden="true" tabindex="-1"></a>                  <span class="co">#~1 | SubjectID, # incoprated as VCV</span></span>
<span id="cb677-9"><a href="#cb677-9" aria-hidden="true" tabindex="-1"></a>                  <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb677-10"><a href="#cb677-10" aria-hidden="true" tabindex="-1"></a>                <span class="co">#R = list(Phylo = cor_tree),</span></span>
<span id="cb677-11"><a href="#cb677-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb677-12"><a href="#cb677-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">method =</span> <span class="st">"REML"</span>, </span>
<span id="cb677-13"><a href="#cb677-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb677-14"><a href="#cb677-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> dat)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb679"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb679-1"><a href="#cb679-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod0d)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 640; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-892.5966  1785.1932  1795.1932  1817.4849  1795.2881   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0103  0.1016     90     no  FocalSpL 
sigma^2.2  0.1450  0.3808    116     no     RecNo 
sigma^2.3  0.6886  0.8298    640     no    Obs_ID 

Test of Moderators (coefficient 2):
F(df1 = 1, df2 = 638) = 1.5062, p-val = 0.2202

Model Results:

         estimate       se     tval   df    pval     ci.lb    ci.ub    
intrcpt   23.4292  18.7537   1.2493  638  0.2120  -13.3973  60.2556    
Year      -0.0114   0.0093  -1.2273  638  0.2202   -0.0297   0.0069    

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb681"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb681-1"><a href="#cb681-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bubble_plot</span>(mod0d,</span>
<span id="cb681-2"><a href="#cb681-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">mod =</span> <span class="st">"Year"</span>,</span>
<span id="cb681-3"><a href="#cb681-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">group =</span> <span class="st">"RecNo"</span>,</span>
<span id="cb681-4"><a href="#cb681-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">xlab =</span> <span class="st">"Publication year"</span>,</span>
<span id="cb681-5"><a href="#cb681-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">g =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="test_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="all-together" class="level3">
<h3 class="anchored" data-anchor-id="all-together">All together</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb682"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb682-1"><a href="#cb682-1" aria-hidden="true" tabindex="-1"></a><span class="co"># full model</span></span>
<span id="cb682-2"><a href="#cb682-2" aria-hidden="true" tabindex="-1"></a>dat_short<span class="sc">$</span>effectN <span class="ot">&lt;-</span> (dat_short<span class="sc">$</span>Ncontrol <span class="sc">*</span> dat_short<span class="sc">$</span>NTreat) <span class="sc">/</span> (dat_short<span class="sc">$</span>Ncontrol <span class="sc">+</span> dat_short<span class="sc">$</span>NTreat)</span>
<span id="cb682-3"><a href="#cb682-3" aria-hidden="true" tabindex="-1"></a>dat_short<span class="sc">$</span>sqeffectN <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(dat_short<span class="sc">$</span>effectN)</span>
<span id="cb682-4"><a href="#cb682-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb682-5"><a href="#cb682-5" aria-hidden="true" tabindex="-1"></a>mod_fulle <span class="ot">&lt;-</span> <span class="fu">rma.mv</span>(<span class="at">yi =</span> SMD, </span>
<span id="cb682-6"><a href="#cb682-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">V =</span> VCVs, </span>
<span id="cb682-7"><a href="#cb682-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random =</span> <span class="fu">list</span>(<span class="sc">~</span><span class="dv">1</span><span class="sc">|</span>FocalSpL , </span>
<span id="cb682-8"><a href="#cb682-8" aria-hidden="true" tabindex="-1"></a>                                 <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> RecNo,</span>
<span id="cb682-9"><a href="#cb682-9" aria-hidden="true" tabindex="-1"></a>                                 <span class="sc">~</span><span class="dv">1</span> <span class="sc">|</span> Obs_ID),</span>
<span id="cb682-10"><a href="#cb682-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">mods =</span>  <span class="sc">~</span> sqeffectN <span class="sc">+</span></span>
<span id="cb682-11"><a href="#cb682-11" aria-hidden="true" tabindex="-1"></a>                     Year <span class="sc">+</span></span>
<span id="cb682-12"><a href="#cb682-12" aria-hidden="true" tabindex="-1"></a>                     sln_duration<span class="sc">*</span>Type <span class="sc">+</span></span>
<span id="cb682-13"><a href="#cb682-13" aria-hidden="true" tabindex="-1"></a>                     sln_duration<span class="sc">*</span>Treat_mod <span class="sc">+</span></span>
<span id="cb682-14"><a href="#cb682-14" aria-hidden="true" tabindex="-1"></a>                     Sex,</span>
<span id="cb682-15"><a href="#cb682-15" aria-hidden="true" tabindex="-1"></a>                   <span class="at">test =</span> <span class="st">"t"</span>,</span>
<span id="cb682-16"><a href="#cb682-16" aria-hidden="true" tabindex="-1"></a>                   <span class="at">method =</span> <span class="st">"REML"</span>,</span>
<span id="cb682-17"><a href="#cb682-17" aria-hidden="true" tabindex="-1"></a>                   <span class="at">sparse =</span> <span class="cn">TRUE</span>,</span>
<span id="cb682-18"><a href="#cb682-18" aria-hidden="true" tabindex="-1"></a>                   <span class="at">data =</span> dat_short)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'V' appears to be not positive definite.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb684"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb684-1"><a href="#cb684-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_fulle)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Multivariate Meta-Analysis Model (k = 600; method: REML)

   logLik   Deviance        AIC        BIC       AICc   
-823.4875  1646.9750  1680.9750  1755.3215  1682.0525   

Variance Components:

            estim    sqrt  nlvls  fixed    factor 
sigma^2.1  0.0000  0.0001     81     no  FocalSpL 
sigma^2.2  0.1587  0.3983    104     no     RecNo 
sigma^2.3  0.7183  0.8475    600     no    Obs_ID 

Test of Moderators (coefficients 2:14):
F(df1 = 13, df2 = 586) = 1.7639, p-val = 0.0454

Model Results:

                              estimate       se     tval   df    pval     ci.lb 
intrcpt                        14.6850  22.7802   0.6446  586  0.5194  -30.0557 
sqeffectN                      -0.0007   0.0328  -0.0216  586  0.9827   -0.0651 
Year                           -0.0070   0.0113  -0.6221  586  0.5341   -0.0293 
sln_duration                   -0.1252   0.0936  -1.3370  586  0.1817   -0.3090 
TypeLifeHistory                -0.0173   0.4714  -0.0366  586  0.9708   -0.9431 
TypePhysiology                 -0.5322   0.1894  -2.8094  586  0.0051   -0.9043 
Treat_modV                      0.0368   0.1478   0.2489  586  0.8035   -0.2535 
Treat_modAV                     0.1375   0.1690   0.8136  586  0.4162   -0.1944 
SexF                           -0.2740   0.1300  -2.1076  586  0.0355   -0.5293 
SexM                           -0.0953   0.1543  -0.6178  586  0.5369   -0.3983 
sln_duration:TypeLifeHistory    0.1450   0.4510   0.3216  586  0.7479   -0.7407 
sln_duration:TypePhysiology     0.2438   0.2055   1.1863  586  0.2360   -0.1599 
sln_duration:Treat_modV        -0.0261   0.1440  -0.1813  586  0.8562   -0.3088 
sln_duration:Treat_modAV       -0.1497   0.1834  -0.8161  586  0.4148   -0.5099 
                                ci.ub     
intrcpt                       59.4257     
sqeffectN                      0.0637     
Year                           0.0152     
sln_duration                   0.0587     
TypeLifeHistory                0.9086     
TypePhysiology                -0.1602  ** 
Treat_modV                     0.3271     
Treat_modAV                    0.4693     
SexF                          -0.0187   * 
SexM                           0.2077     
sln_duration:TypeLifeHistory   1.0307     
sln_duration:TypePhysiology    0.6475     
sln_duration:Treat_modV        0.2566     
sln_duration:Treat_modAV       0.2105     

---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb686"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb686-1"><a href="#cb686-1" aria-hidden="true" tabindex="-1"></a>dat_fulle <span class="ot">&lt;-</span> <span class="fu">qdrg</span>(<span class="at">object =</span> mod_fulle, </span>
<span id="cb686-2"><a href="#cb686-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">data =</span> dat_short)</span>
<span id="cb686-3"><a href="#cb686-3" aria-hidden="true" tabindex="-1"></a><span class="co"># marginalized overall mean at vi = 0 and year.c = 0; also weights = "prop" or "cells" average things over proportionally. if not specified, all groups (levels) get the same weights</span></span>
<span id="cb686-4"><a href="#cb686-4" aria-hidden="true" tabindex="-1"></a><span class="co"># res_fulle1 &lt;- emmeans(dat_fulle, </span></span>
<span id="cb686-5"><a href="#cb686-5" aria-hidden="true" tabindex="-1"></a><span class="co">#                      specs = ~ sqeffectN,</span></span>
<span id="cb686-6"><a href="#cb686-6" aria-hidden="true" tabindex="-1"></a><span class="co">#                      df = mod_fulle$ddf, </span></span>
<span id="cb686-7"><a href="#cb686-7" aria-hidden="true" tabindex="-1"></a><span class="co">#                      weights = "prop")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>